!function (e) { var t = {}; function i(r) { if (t[r]) return t[r].exports; var o = t[r] = { i: r, l: !1, exports: {} }; return e[r].call(o.exports, o, o.exports, i), o.l = !0, o.exports } i.m = e, i.c = t, i.d = function (e, t, r) { i.o(e, t) || Object.defineProperty(e, t, { enumerable: !0, get: r }) }, i.r = function (e) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e, "__esModule", { value: !0 }) }, i.t = function (e, t) { if (1 & t && (e = i(e)), 8 & t) return e; if (4 & t && "object" == typeof e && e && e.__esModule) return e; var r = Object.create(null); if (i.r(r), Object.defineProperty(r, "default", { enumerable: !0, value: e }), 2 & t && "string" != typeof e) for (var o in e) i.d(r, o, function (t) { return e[t] }.bind(null, o)); return r }, i.n = function (e) { var t = e && e.__esModule ? function () { return e.default } : function () { return e }; return i.d(t, "a", t), t }, i.o = function (e, t) { return Object.prototype.hasOwnProperty.call(e, t) }, i.p = "", i(i.s = 17) }([function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.Project = void 0, function (e) { e.Artlist = "Artlist", e.Artgrid = "Artgrid" }(t.Project || (t.Project = {})) }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.CookieValuesEnum = void 0, function (e) { e.SessionId = "userSession", e.VisitorId = "userVisitor" }(t.CookieValuesEnum || (t.CookieValuesEnum = {})) }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.Config = t.configVariables = void 0; var r = i(22), o = i(0), n = i(3); t.configVariables = { environment: n.Environment.Development, isProduction: !1, projectName: o.Project.Artlist, attributionEventsHttpUrl: r.EnvironmentVariables[n.Environment.Development][o.Project.Artlist].attributionEventsHttpUrl, mixpanelToken: r.EnvironmentVariables[n.Environment.Development][o.Project.Artlist].mixpanelToken, trackJSToken: r.EnvironmentVariables[n.Environment.Development][o.Project.Artlist].trackJSToken }; var s = function () { function e() { } return e.getInstance = function () { return e.instance || (e.instance = new e), e.instance }, e.prototype.init = function (e, i, s, a, c) { return this.promiseFunction((function () { t.configVariables.environment = n.Environment[e] || t.configVariables.environment, t.configVariables.isProduction = n.Environment.Production === e, t.configVariables.projectName = o.Project[i] || t.configVariables.projectName, t.configVariables.mixpanelToken = a || r.EnvironmentVariables[t.configVariables.environment][t.configVariables.projectName].mixpanelToken, t.configVariables.attributionEventsHttpUrl = s || r.EnvironmentVariables[t.configVariables.environment][t.configVariables.projectName].attributionEventsHttpUrl, t.configVariables.trackJSToken = c || r.EnvironmentVariables[t.configVariables.environment][t.configVariables.projectName].trackJSToken })) }, e.prototype.promiseFunction = function (e) { return new Promise((function (t, i) { try { t(e()) } catch (e) { i(e.message || e) } })) }, e }(); t.Config = s }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.Environment = void 0, function (e) { e.Production = "Production", e.Test = "Test", e.Development = "Development" }(t.Environment || (t.Environment = {})) }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); var r = i(5); Object.defineProperty(t, "CookieService", { enumerable: !0, get: function () { return r.CookieService } }); var o = i(6); Object.defineProperty(t, "PublicEventService", { enumerable: !0, get: function () { return o.PublicEventService } }); var n = i(7); Object.defineProperty(t, "ActionsService", { enumerable: !0, get: function () { return n.ActionsService } }); var s = i(41); Object.defineProperty(t, "LocalStorageService", { enumerable: !0, get: function () { return s.LocalStorageService } }), Object.defineProperty(t, "SessionStorageService", { enumerable: !0, get: function () { return s.SessionStorageService } }) }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); var r = i(19); Object.defineProperty(t, "CookieService", { enumerable: !0, get: function () { return r.CookieService } }) }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); var r = i(10); Object.defineProperty(t, "PublicEventService", { enumerable: !0, get: function () { return r.PublicEventService } }) }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); var r = i(11); Object.defineProperty(t, "ActionsService", { enumerable: !0, get: function () { return r.ActionsService } }); var o = i(12); Object.defineProperty(t, "TrackModel", { enumerable: !0, get: function () { return o.TrackModel } }) }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.utm_term = t.utm_content = t.utm_medium = t.utm_campaign = t.utm_source = void 0, t.utm_source = "utm_source", t.utm_campaign = "utm_campaign", t.utm_medium = "utm_medium", t.utm_content = "utm_content", t.utm_term = "utm_term" }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.Generator = void 0; var r = function () { function e() { } return e.getHashValue = function (e) { void 0 === e && (e = 55); for (var t = "", i = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789", r = i.length, o = 0; o < e; o++)t += i.charAt(Math.floor(Math.random() * r)); return t }, e.uuidv4 = function () { return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, (function (e) { var t = 16 * Math.random() | 0; return ("x" == e ? t : 3 & t | 8).toString(16) })) }, e }(); t.Generator = r }, function (e, t, i) { "use strict"; var r = this && this.__assign || function () { return (r = Object.assign || function (e) { for (var t, i = 1, r = arguments.length; i < r; i++)for (var o in t = arguments[i]) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]); return e }).apply(this, arguments) }, o = this && this.__decorate || function (e, t, i, r) { var o, n = arguments.length, s = n < 3 ? t : null === r ? r = Object.getOwnPropertyDescriptor(t, i) : r; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, r); else for (var a = e.length - 1; a >= 0; a--)(o = e[a]) && (s = (n < 3 ? o(s) : n > 3 ? o(t, i, s) : o(t, i)) || s); return n > 3 && s && Object.defineProperty(t, i, s), s }; Object.defineProperty(t, "__esModule", { value: !0 }), t.PublicEventService = void 0; var n = i(7), s = i(15), a = i(5), c = i(16), p = i(40), u = i(13), _ = i(1), l = i(14), d = i(8), h = function () { function e() { this.actionsService = new n.ActionsService, this.locationService = new s.LocationService, this.cookieService = new a.CookieService } return e.prototype.visit = function (e, t, i, r, o, n, s, p, h) { var f = new a.CookieService, m = f.get(_.CookieValuesEnum.SessionId) || "", g = f.get(_.CookieValuesEnum.VisitorId) || f.get("mixPanelUser") || "", v = u.Helper.getPage() || "", y = this.cookieService.get(_.CookieValuesEnum.VisitorId) || this.cookieService.get("mixPanelUser"), b = { utm_source: this.locationService.getUtmParameterByName(d.utm_source) || void 0, utm_campaign: this.locationService.getUtmParameterByName(d.utm_campaign) || void 0, utm_medium: this.locationService.getUtmParameterByName(d.utm_medium) || void 0, utm_content: this.locationService.getUtmParameterByName(d.utm_content) || void 0, utm_term: this.locationService.getUtmParameterByName(d.utm_term) || void 0 }; l.UtmsManager.getInstance().utms = b; var k = { utm_source: t || b.utm_source, utm_campaign: i || b.utm_campaign, utm_medium: r || b.utm_medium, utm_content: o || b.utm_content, utm_term: n || b.utm_term, keyword: s || this.locationService.getUtmParameterByName("keyword"), gclid: p || this.locationService.getUtmParameterByName("gclid"), ad_id: h || this.locationService.getUtmParameterByName("ad"), new_visitor: e || !y, session_id: m, visitor_id: g, page: v }; this.actionsService.track(c.visit, k) }, e.prototype.page_view = function (e, t, i, o, n, s, a, p) { var u = this.cookieService.get(), _ = r(r({}, l.UtmsManager.getInstance().utms), { keyword: s || this.locationService.getUtmParameterByName("keyword"), gclid: a || this.locationService.getUtmParameterByName("gclid"), ad_id: p || this.locationService.getUtmParameterByName("ad"), new_visitor: i || !u, page_type: t || "", page: e || "", previous_page: "" }); this.actionsService.track(c.page_view, _) }, e.prototype.signup_button_clicked = function () { this.actionsService.track(c.signup_button_clicked) }, e.prototype.register = function (e, t) { var i = { user_id: t, register_method: e }; this.actionsService.track(c.register, i) }, e.prototype.subscribe = function (e, t) { var i = { to_plan: e, is_paid: t }; this.actionsService.track("subscribe", i) }, e.prototype.payment_attempted = function (e, t, i, r) { var o = { amount: e, payment_method: t, payment_method_token: i, payment_type: r }; this.actionsService.track(c.payment_attempted, o) }, e.prototype.payment_succeed = function (e, t, i, r, o) { var n = { payment_id: e, amount: t, payment_method: i, payment_method_token: r, payment_type: o }; this.actionsService.track(c.payment_succeed, n) }, e.prototype.payment_rejected = function (e, t, i, r, o) { var n = { amount: e, payment_method: t, payment_method_token: i, payment_type: r, reason: o }; this.actionsService.track(c.payment_rejected, n) }, e.prototype.subscription_upgraded = function (e, t) { var i = { from_plan: e, to_plan: t }; this.actionsService.track(c.subscription_upgraded, i) }, e.prototype.refund_requested = function (e, t) { var i = { original_payment_id: e, reason: t }; this.actionsService.track(c.refund_requested, i) }, e.prototype.refund_approved = function (e, t, i) { var r = { refund_payment_id: e, original_payment_id: t, reason: i }; this.actionsService.track(c.refund_approved, r) }, e.prototype.chargeback_initiated = function (e, t, i, r) { var o = { chargeback_payment_id: e, original_payment_id: t, reason: i, payment_type: r }; this.actionsService.track(c.chargeback_initiated, o) }, e.prototype.chargeback_accepted = function (e, t, i, r) { var o = { chargeback_payment_id: e, original_payment_id: t, reason: i, payment_type: r }; this.actionsService.track(c.chargeback_accepted, o) }, e.prototype.subscription_renewed = function (e, t) { var i = { is_auto: e, prev_subscription_start_date: t }; this.actionsService.track(c.subscription_renewed, i) }, e.prototype.subscription_cancelled = function () { this.actionsService.track(c.subscription_cancelled) }, e.prototype.media_viewed = function (e, t, i, r, o, n, s, a, p, u, _) { var l = { listing_position: e, scrolled_to_be_seen: t, is_new: i, title: r, genre: o, song_length: n, media_type: s, click_source: a, song_id: p, artist: u, collection: _ }; this.actionsService.track(c.media_viewed, l) }, e.prototype.media_played = function (e, t, i, r, o, n, s, a, p, _) { var l = { media_start: u.Helper.getFirstParam(e, this.media_start), is_new: u.Helper.getFirstParam(t, this.is_new), title: u.Helper.getFirstParam(i, this.title), genre: u.Helper.getFirstParam(r, this.genre), song_length: u.Helper.getFirstParam(o, this.song_length), time_point: u.Helper.getFirstParam(n, this.time_point), media_type: u.Helper.getFirstParam(s, this.media_type), click_source: u.Helper.getFirstParam(a, this.click_source), song_id: u.Helper.getFirstParam(p, this.song_id), artist: u.Helper.getFirstParam(_, this.artist) }; this.actionsService.track(c.media_played, l) }, e.prototype.media_hover_auto_played = function (e, t, i, r, o, n, s, a, p, _) { var l = { media_start: u.Helper.getFirstParam(e, this.media_start), is_new: u.Helper.getFirstParam(t, this.is_new), title: u.Helper.getFirstParam(i, this.title), genre: u.Helper.getFirstParam(r, this.genre), song_length: u.Helper.getFirstParam(o, this.song_length), time_point: u.Helper.getFirstParam(n, this.time_point), media_type: u.Helper.getFirstParam(s, this.media_type), click_source: u.Helper.getFirstParam(a, this.click_source), song_id: u.Helper.getFirstParam(p, this.song_id), artist: u.Helper.getFirstParam(_, this.artist) }; this.actionsService.track(c.media_hover_auto_played, l) }, e.prototype.media_paused = function (e, t, i, r, o, n, s, a, p) { var _ = { is_new: u.Helper.getFirstParam(e, this.is_new), title: u.Helper.getFirstParam(t, this.title), genre: u.Helper.getFirstParam(i, this.genre), song_length: u.Helper.getFirstParam(r, this.song_length), time_point: u.Helper.getFirstParam(o, this.time_point), media_type: u.Helper.getFirstParam(n, this.media_type), click_source: u.Helper.getFirstParam(s, this.click_source), song_id: u.Helper.getFirstParam(a, this.song_id), artist: u.Helper.getFirstParam(p, this.artist) }; this.actionsService.track(c.media_paused, _) }, e.prototype.media_seeked = function (e, t, i, r, o, n, s, a, p) { var _ = { is_new: u.Helper.getFirstParam(e, this.is_new), title: u.Helper.getFirstParam(t, this.title), genre: u.Helper.getFirstParam(i, this.genre), song_length: u.Helper.getFirstParam(r, this.song_length), time_point: u.Helper.getFirstParam(o, this.time_point), media_type: u.Helper.getFirstParam(n, this.media_type), click_source: u.Helper.getFirstParam(s, this.click_source), song_id: u.Helper.getFirstParam(a, this.song_id), artist: u.Helper.getFirstParam(p, this.artist) }; this.actionsService.track(c.media_seeked, _) }, e.prototype.media_versions_expanded = function (e, t, i, r, o, n, s, a) { var p = { title: u.Helper.getFirstParam(e, this.title), genre: u.Helper.getFirstParam(t, this.genre), song_length: u.Helper.getFirstParam(i, this.song_length), time_point: u.Helper.getFirstParam(r, this.time_point), media_type: u.Helper.getFirstParam(o, this.media_type), click_source: u.Helper.getFirstParam(n, this.click_source), song_id: u.Helper.getFirstParam(s, this.song_id), artist: u.Helper.getFirstParam(a, this.artist) }; this.actionsService.track(c.media_versions_expanded, p) }, e.prototype.share_button_clicked = function (e, t, i, r, o, n) { var s = { media_type: u.Helper.getFirstParam(e, this.media_type), title: u.Helper.getFirstParam(t, this.title), genre: u.Helper.getFirstParam(i, this.genre), song_length: u.Helper.getFirstParam(r, this.song_length), song_id: u.Helper.getFirstParam(o, this.song_id), artist: u.Helper.getFirstParam(n, this.artist) }; this.actionsService.track(c.share_button_clicked, s) }, e.prototype.share_method_chosen = function (e, t, i, r, o, n, s) { var a = { share_method: u.Helper.getFirstParam(e, this.share_method), media_type: u.Helper.getFirstParam(t, this.media_type), title: u.Helper.getFirstParam(i, this.title), genre: u.Helper.getFirstParam(r, this.genre), song_length: u.Helper.getFirstParam(o, this.song_length), song_id: u.Helper.getFirstParam(n, this.song_id), artist: u.Helper.getFirstParam(s, this.artist) }; this.actionsService.track(c.share_method_chosen, a) }, e.prototype.volume_changed = function (e, t, i, r, o, n, s, a, p, _) { var l = { new_volume_value: u.Helper.getFirstParam(e, this.new_volume_value), direction: u.Helper.getFirstParam(t, this.direction), volume_control_method: u.Helper.getFirstParam(i, this.volume_control_method), title: u.Helper.getFirstParam(r, this.title), genre: u.Helper.getFirstParam(o, this.genre), song_length: u.Helper.getFirstParam(n, this.song_length), time_point: u.Helper.getFirstParam(s, this.time_point), media_type: u.Helper.getFirstParam(a, this.media_type), song_id: u.Helper.getFirstParam(p, this.song_id), artist: u.Helper.getFirstParam(_, this.artist) }; this.actionsService.track(c.volume_changed, l) }, e.prototype.category_filter_chosen = function (e) { var t = { category_item: e }; this.actionsService.track(c.category_filter_chosen, t) }, e.prototype.subcategory_filter_chosen = function (e, t) { var i = { category_item: e, subcategory_item: t }; this.actionsService.track(c.subcategory_filter_chosen, i) }, e.prototype.subcategory_filter_removed = function (e, t) { var i = { category_item: e, subcategory_item: t }; this.actionsService.track(c.subcategory_filter_removed, i) }, e.prototype.vocal_filter_toggled = function (e) { var t = { no_vocal_enabled: e }; this.actionsService.track(c.vocal_filter_toggled, t) }, e.prototype.sort_by_select_opened = function (e) { var t = { last_value: e }; this.actionsService.track(c.sort_by_select_opened, t) }, e.prototype.sort_by_selected = function (e, t) { var i = { last_value: e, new_value: t }; this.actionsService.track(c.sort_by_selected, i) }, e.prototype.tempo_filter_opened = function (e) { var t = { last_value: e }; this.actionsService.track(c.tempo_filter_opened, t) }, e.prototype.tempo_filter_selected = function (e, t) { var i = { last_value: e, new_value: t }; this.actionsService.track(c.tempo_filter_selected, i) }, e.prototype.duration_filter_opened = function (e, t) { var i = { last_duration_from: e, last_duration_to: t }; this.actionsService.track(c.duration_filter_opened, i) }, e.prototype.duration_filter_selected = function (e, t, i, r) { var o = { last_duration_from: u.Helper.getFirstParam(e, this.last_duration_from), last_duration_to: u.Helper.getFirstParam(t, this.last_duration_to), new_duration_from: u.Helper.getFirstParam(i, this.new_duration_from), new_duration_to: u.Helper.getFirstParam(r, this.new_duration_to) }; this.actionsService.track(c.duration_filter_selected, o) }, e.prototype.menu_spotlight_chosen = function () { this.actionsService.track(c.menu_spotlight_chosen) }, e.prototype.tab_selected = function (e) { var t = { tab_selected: e }; this.actionsService.track(c.tab_selected, t) }, e.prototype.media_added_to_cart = function (e, t, i, r, o, n, s, a, p) { var _ = { media_type: u.Helper.getFirstParam(e, this.media_type), is_new: u.Helper.getFirstParam(t, this.is_new), title: u.Helper.getFirstParam(i, this.title), genre: u.Helper.getFirstParam(r, this.genre), song_length: u.Helper.getFirstParam(o, this.song_length), song_id: u.Helper.getFirstParam(n, this.song_id), artist: u.Helper.getFirstParam(s, this.artist), collection: u.Helper.getFirstParam(a, this.collection), items_in_cart: u.Helper.getFirstParam(p, this.items_in_cart) }; this.actionsService.track(c.media_added_to_cart, _) }, e.prototype.media_removed_from_cart = function (e, t, i, r, o, n, s, a, p) { var _ = { media_type: u.Helper.getFirstParam(e, this.media_type), is_new: u.Helper.getFirstParam(t, this.is_new), title: u.Helper.getFirstParam(i, this.title), genre: u.Helper.getFirstParam(r, this.genre), song_length: u.Helper.getFirstParam(o, this.song_length), song_id: u.Helper.getFirstParam(n, this.song_id), artist: u.Helper.getFirstParam(s, this.artist), collection: u.Helper.getFirstParam(a, this.collection), items_in_cart: u.Helper.getFirstParam(p, this.items_in_cart) }; this.actionsService.track(c.media_removed_from_cart, _) }, e.prototype.media_added_to_favorite = function (e, t, i, r, o, n, s, a) { var p = { media_type: u.Helper.getFirstParam(e, this.media_type), is_new: u.Helper.getFirstParam(t, this.is_new), title: u.Helper.getFirstParam(i, this.title), genre: u.Helper.getFirstParam(r, this.genre), song_length: u.Helper.getFirstParam(o, this.song_length), song_id: u.Helper.getFirstParam(n, this.song_id), artist: u.Helper.getFirstParam(s, this.artist), collection: u.Helper.getFirstParam(a, this.collection) }; this.actionsService.track(c.media_added_to_favorite, p) }, e.prototype.add_to_collection_pressed = function (e, t, i, r, o, n, s, a) { var p = { media_type: u.Helper.getFirstParam(e, this.media_type), is_new: u.Helper.getFirstParam(t, this.is_new), title: u.Helper.getFirstParam(i, this.title), genre: u.Helper.getFirstParam(r, this.genre), song_length: u.Helper.getFirstParam(o, this.song_length), song_id: u.Helper.getFirstParam(n, this.song_id), artist: u.Helper.getFirstParam(s, this.artist), collection: u.Helper.getFirstParam(a, this.collection) }; this.actionsService.track(c.add_to_collection_pressed, p) }, e.prototype.media_added_to_collection = function (e, t, i, r, o, n, s, a) { var p = { media_type: u.Helper.getFirstParam(e, this.media_type), is_new: u.Helper.getFirstParam(t, this.is_new), title: u.Helper.getFirstParam(i, this.title), genre: u.Helper.getFirstParam(r, this.genre), song_length: u.Helper.getFirstParam(o, this.song_length), song_id: u.Helper.getFirstParam(n, this.song_id), artist: u.Helper.getFirstParam(s, this.artist), collection: u.Helper.getFirstParam(a, this.collection) }; this.actionsService.track(c.media_added_to_collection, p) }, e.prototype.media_removed_from_collection = function (e, t, i, r, o, n, s, a) { var p = { media_type: u.Helper.getFirstParam(e, this.media_type), is_new: u.Helper.getFirstParam(t, this.is_new), title: u.Helper.getFirstParam(i, this.title), genre: u.Helper.getFirstParam(r, this.genre), song_length: u.Helper.getFirstParam(o, this.song_length), song_id: u.Helper.getFirstParam(n, this.song_id), artist: u.Helper.getFirstParam(s, this.artist), collection: u.Helper.getFirstParam(a, this.collection) }; this.actionsService.track(c.media_removed_from_collection, p) }, e.prototype.collection_created = function (e) { var t = { name: e }; this.actionsService.track(c.collection_created, t) }, e.prototype.collection_removed = function (e) { var t = { name: e }; this.actionsService.track(c.collection_removed, t) }, e.prototype.suggestion_impression = function (e, t) { var i = { suggestion_type: e, media_type: t }; this.actionsService.track(c.suggestion_impression, i) }, e.prototype.suggestion_clicked = function (e, t) { var i = { suggestion_type: e, media_type: t }; this.actionsService.track(c.suggestion_clicked, i) }, e.prototype.favorite_tab_selected = function (e) { var t = { tab_selected: e }; this.actionsService.track(c.favorite_tab_selected, t) }, e.prototype.get_a_license_clicked = function (e) { var t = { component: e }; this.actionsService.track(c.get_a_license_clicked, t) }, e.prototype.menu_cart_chosen = function () { this.actionsService.track(c.menu_cart_chosen) }, e.prototype.pricing_clicked = function () { this.actionsService.track(c.pricing_clicked) }, e.prototype.close_button_clicked = function () { this.actionsService.track(c.close_button_clicked) }, e.prototype.search_media_type_switched = function (e) { var t = { media_type: e }; this.actionsService.track(c.search_media_type_switched, t) }, e.prototype.search_button_clicked = function () { this.actionsService.track(c.search_button_clicked) }, e.prototype.media_searched = function (e, t) { var i = { search_term: e, media_type: t }; this.actionsService.track(c.media_searched, i) }, e.prototype.search_returned_empty = function (e, t) { var i = { search_term: e, media_type: t }; this.actionsService.track(c.search_returned_empty, i) }, e.prototype.search_option_displayed = function (e, t, i, r, o) { var n = { search_term: e, listing_position: t, title: i, genre: r, song_id: o }; this.actionsService.track(c.search_option_displayed, n) }, e.prototype.search_cleared = function () { this.actionsService.track(c.search_cleared) }, e.prototype.hamburger_button_clicked = function () { this.actionsService.track(c.hamburger_button_clicked) }, e.prototype.checkout_button_clicked = function () { this.actionsService.track(c.checkout_button_clicked) }, e.prototype.media_downloaded = function (e, t, i, r, o, n, s) { var a = { media_type: u.Helper.getFirstParam(e, this.media_type), is_new: u.Helper.getFirstParam(t, this.is_new), title: u.Helper.getFirstParam(i, this.title), genre: u.Helper.getFirstParam(r, this.genre), song_length: u.Helper.getFirstParam(o, this.song_length), song_id: u.Helper.getFirstParam(n, this.song_id), artist: u.Helper.getFirstParam(s, this.artist) }; this.actionsService.track(c.media_downloaded, a) }, e.prototype.pricing_plan_selected = function (e) { var t = { plan: e }; this.actionsService.track(c.pricing_plan_selected, t) }, e.prototype.subscribe_clicked = function (e) { var t = { payment_method: e }; this.actionsService.track(c.subscribe_clicked, t) }, e.prototype.refer_share_now_clicked = function (e) { var t = { refers_done: e }; this.actionsService.track(c.refer_share_now_clicked, t) }, e.prototype.menu_opened = function (e) { var t = { menu: e }; this.actionsService.track(c.menu_opened, t) }, e.prototype.menu_item_chosen = function (e, t) { var i = { menu: e, item: t }; this.actionsService.track(c.menu_item_chosen, i) }, e.prototype.go_to_social_clicked = function (e) { var t = { social_media: e }; this.actionsService.track(c.go_to_social_clicked, t) }, e.prototype.abtest_allocated = function (e, t) { var i = { test: e, variant: t }; this.actionsService.track(c.abtest_allocated, i) }, e.prototype.abtest_served = function (e, t) { var i = { test: e, variant: t }; this.actionsService.track(c.abtest_served, i) }, e.prototype.logo_clicked = function () { this.actionsService.track(c.logo_clicked) }, o([p.ObjectParamFunction], e.prototype, "media_played", null), o([p.ObjectParamFunction], e.prototype, "media_hover_auto_played", null), o([p.ObjectParamFunction], e.prototype, "media_paused", null), o([p.ObjectParamFunction], e.prototype, "media_seeked", null), o([p.ObjectParamFunction], e.prototype, "media_versions_expanded", null), o([p.ObjectParamFunction], e.prototype, "share_button_clicked", null), o([p.ObjectParamFunction], e.prototype, "share_method_chosen", null), o([p.ObjectParamFunction], e.prototype, "volume_changed", null), o([p.ObjectParamFunction], e.prototype, "duration_filter_selected", null), o([p.ObjectParamFunction], e.prototype, "media_added_to_cart", null), o([p.ObjectParamFunction], e.prototype, "media_removed_from_cart", null), o([p.ObjectParamFunction], e.prototype, "media_added_to_favorite", null), o([p.ObjectParamFunction], e.prototype, "add_to_collection_pressed", null), o([p.ObjectParamFunction], e.prototype, "media_added_to_collection", null), o([p.ObjectParamFunction], e.prototype, "media_removed_from_collection", null), o([p.ObjectParamFunction], e.prototype, "media_downloaded", null), e }(); t.PublicEventService = h }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.ActionsService = void 0; var r = i(20), o = i(12), n = i(23), s = i(35), a = i(0), c = i(3), p = function () { function e() { this.people = { set: function (e, t, i) { var r = new s.UserProperties(e); this.userProps = r, n.default.Mixpanel.people.set(r, t, i), n.default.Snowflake.peopleSet(r, t, i) } }, this.people.set = this.people.set.bind(this) } return e.prototype.init = function (e, t, i, o, n) { return void 0 === e && (e = c.Environment.Development), void 0 === t && (t = a.Project.Artlist), r.App.getInstance().start(e, t, i, o, n) }, e.prototype.disable = function () { n.default.Mixpanel.disable() }, e.prototype.enable = function () { n.default.Mixpanel.enable() }, e.prototype.disableAll = function () { n.default.Mixpanel.disable(), n.default.Snowflake.disable() }, e.prototype.enableAll = function () { n.default.Mixpanel.enable(), n.default.Snowflake.enable() }, e.prototype.initProviders = function () { n.default.Mixpanel.init(), n.default.Snowflake.init() }, e.prototype.track = function (e, t, i, r) { var s = new o.TrackModel(e, t); n.default.Mixpanel.track(s), n.default.Snowflake.track(s) }, e.prototype.register = function (e, t) { var i = new s.SuperProperties(e); this.superProps = i, n.default.Mixpanel.register(i, t), n.default.Snowflake.register(i, t) }, e.prototype.identify = function (e) { n.default.Mixpanel.identify(e) }, e.prototype.hjIdentify = function (e, t, i, r, o) { void 0 === t && (t = void 0), void 0 === i && (i = void 0), void 0 === r && (r = void 0), void 0 === o && (o = void 0), n.default.Hotjar.identify(e, t, i, r, o) }, e.prototype.getFullPropsEvent = function (e, t, i, r) { var n = new o.TrackModel(e, t); return Object.assign({}, n, this.superProps, this.userProps) }, e.prototype.get_property = function (e) { return n.default.Mixpanel.get_property(e) }, e.prototype.get_super_properties = function () { return this.superProps }, e.prototype.get_user_properties = function () { return this.userProps }, e }(); t.ActionsService = p }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.TrackModel = void 0; var r = function (e, t) { this.event = e, this.properties = t || {}, this.properties.date_created = (new Date).toLocaleString() }; t.TrackModel = r }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.Helper = void 0; var r = i(37), o = i(2), n = i(0), s = function () { function e() { } return e.getFirstParam = function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; return e.find((function (e) { return void 0 !== typeof e && null != e })) }, e.detectBrowser = function () { return r.browsers.isOpera ? "Opera" : r.browsers.isFirefox ? "Firefox" : r.browsers.isSafari ? "Safari" : r.browsers.isIE ? "Explorer" : r.browsers.isEdge ? "Edge" : r.browsers.isChrome ? "Chrome" : (r.browsers.isChrome || r.browsers.isOpera) && window.CSS ? "Blink" : r.browsers.isMobileDevice ? "Mobile Device" : void 0 }, e.getOSName = function () { var e = "Unknown OS"; return -1 != navigator.appVersion.indexOf("Win") && (e = "Windows"), -1 != navigator.appVersion.indexOf("Mac") && (e = "MacOS"), -1 != navigator.appVersion.indexOf("X11") && (e = "UNIX"), -1 != navigator.appVersion.indexOf("Linux") && (e = "Linux"), e }, e.getProduct = function () { var e = ""; return "sfx" === window.location.pathname.split("/")[1] ? e = "sfx" : o.configVariables.projectName === n.Project.Artgrid ? e = "artgrid" : o.configVariables.projectName === n.Project.Artlist && (e = "music"), e }, e.getPage = function () { var e = window.location.pathname.split("/"), t = e[1], i = ""; return "sfx" === t ? "" !== e[2] && (i = e[2]) : i = "lp" === t ? e[1] + " " + e[2] : t, i }, e }(); t.Helper = s }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.UtmsManager = void 0; var r = i(8), o = i(15), n = function () { function e() { var e; this._utms = ((e = {})[r.utm_source] = void 0, e[r.utm_campaign] = void 0, e[r.utm_medium] = void 0, e[r.utm_content] = void 0, e[r.utm_term] = void 0, e), this.locationService = new o.LocationService } return e.getInstance = function () { return e.instance || (e.instance = new e), e.instance }, Object.defineProperty(e.prototype, "utms", { get: function () { return this._utms }, set: function (e) { var t; this._utms = ((t = {})[r.utm_source] = e.utm_source || this.locationService.getUtmParameterByName(r.utm_source) || void 0, t[r.utm_campaign] = e.utm_campaign || this.locationService.getUtmParameterByName(r.utm_campaign) || void 0, t[r.utm_medium] = e.utm_medium || this.locationService.getUtmParameterByName(r.utm_medium) || void 0, t[r.utm_content] = e.utm_content || this.locationService.getUtmParameterByName(r.utm_content) || void 0, t[r.utm_term] = e.utm_term || this.locationService.getUtmParameterByName(r.utm_term) || void 0, t) }, enumerable: !1, configurable: !0 }), e }(); t.UtmsManager = n }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); var r = i(38); Object.defineProperty(t, "LocationService", { enumerable: !0, get: function () { return r.LocationService } }) }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.logo_clicked = t.abtest_served = t.abtest_allocated = t.go_to_social_clicked = t.menu_item_chosen = t.menu_opened = t.refer_share_now_clicked = t.subscribe_clicked = t.pricing_plan_selected = t.media_downloaded = t.checkout_button_clicked = t.hamburger_button_clicked = t.search_cleared = t.search_option_displayed = t.search_returned_empty = t.media_searched = t.search_button_clicked = t.search_media_type_switched = t.close_button_clicked = t.pricing_clicked = t.menu_cart_chosen = t.get_a_license_clicked = t.favorite_tab_selected = t.suggestion_clicked = t.suggestion_impression = t.collection_removed = t.collection_created = t.media_removed_from_collection = t.media_added_to_collection = t.add_to_collection_pressed = t.media_added_to_favorite = t.media_removed_from_cart = t.media_added_to_cart = t.tab_selected = t.menu_spotlight_chosen = t.duration_filter_selected = t.duration_filter_opened = t.tempo_filter_selected = t.tempo_filter_opened = t.sort_by_selected = t.sort_by_select_opened = t.vocal_filter_toggled = t.subcategory_filter_removed = t.subcategory_filter_chosen = t.category_filter_chosen = t.volume_changed = t.share_method_chosen = t.share_button_clicked = t.media_versions_expanded = t.media_seeked = t.media_paused = t.media_hover_auto_played = t.media_played = t.media_viewed = t.subscription_cancelled = t.subscription_renewed = t.chargeback_accepted = t.chargeback_initiated = t.refund_approved = t.refund_requested = t.subscription_upgraded = t.payment_rejected = t.payment_succeed = t.payment_attempted = t.subscribe = t.register = t.signup_button_clicked = t.page_view = t.visit = void 0, t.visit = "visit", t.page_view = "page view", t.signup_button_clicked = "signup button clicked", t.register = "register", t.subscribe = "subscribe", t.payment_attempted = "payment attempted", t.payment_succeed = "payment succeed", t.payment_rejected = "payment rejected", t.subscription_upgraded = "subscription upgraded", t.refund_requested = "refund requested", t.refund_approved = "refund approved", t.chargeback_initiated = "chargeback initiated", t.chargeback_accepted = "chargeback accepted", t.subscription_renewed = "subscription renewed", t.subscription_cancelled = "subscription cancelled", t.media_viewed = "media viewed", t.media_played = "media played", t.media_hover_auto_played = "media hover auto played", t.media_paused = "media paused", t.media_seeked = "media seeked", t.media_versions_expanded = "media versions expanded", t.share_button_clicked = "share button clicked", t.share_method_chosen = "share method chosen", t.volume_changed = "volume changed", t.category_filter_chosen = "category filter chosen", t.subcategory_filter_chosen = "subcategory filter chosen", t.subcategory_filter_removed = "subcategory filter removed", t.vocal_filter_toggled = "vocal filter toggled", t.sort_by_select_opened = "sort by select opened", t.sort_by_selected = "sort by selected", t.tempo_filter_opened = "tempo filter opened", t.tempo_filter_selected = "tempo filter selected", t.duration_filter_opened = "duration filter opened", t.duration_filter_selected = "duration filter selected", t.menu_spotlight_chosen = "menu spotlight chosen", t.tab_selected = "tab selected", t.media_added_to_cart = "media added to cart", t.media_removed_from_cart = "media removed from cart", t.media_added_to_favorite = "media added to favorite", t.add_to_collection_pressed = "add to collection pressed", t.media_added_to_collection = "media added to collection", t.media_removed_from_collection = "media removed from collection", t.collection_created = "collection created", t.collection_removed = "collection removed", t.suggestion_impression = "suggestion impression", t.suggestion_clicked = "suggestion clicked", t.favorite_tab_selected = "favorite tab selected", t.get_a_license_clicked = "get a license clicked", t.menu_cart_chosen = "menu cart chosen", t.pricing_clicked = "pricing clicked", t.close_button_clicked = "close button clicked", t.search_media_type_switched = "search media type switched", t.search_button_clicked = "search button clicked", t.media_searched = "media searched", t.search_returned_empty = "search returned empty", t.search_option_displayed = "search option displayed", t.search_cleared = "search cleared", t.hamburger_button_clicked = "hamburger button clicked", t.checkout_button_clicked = "checkout button clicked", t.media_downloaded = "media downloaded", t.pricing_plan_selected = "pricing plan selected", t.subscribe_clicked = "subscribe clicked", t.refer_share_now_clicked = "refer share now clicked", t.menu_opened = "menu opened", t.menu_item_chosen = "menu item chosen", t.go_to_social_clicked = "go to social clicked", t.abtest_allocated = "abtest allocated", t.abtest_served = "abtest served", t.logo_clicked = "logo clicked" }, function (e, t, i) { "use strict"; var r = this && this.__createBinding || (Object.create ? function (e, t, i, r) { void 0 === r && (r = i), Object.defineProperty(e, r, { enumerable: !0, get: function () { return t[i] } }) } : function (e, t, i, r) { void 0 === r && (r = i), e[r] = t[i] }), o = this && this.__exportStar || function (e, t) { for (var i in e) "default" === i || t.hasOwnProperty(i) || r(t, e, i) }; Object.defineProperty(t, "__esModule", { value: !0 }), i(18), o(i(44), t) }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); var r = i(4); Object.defineProperty(t, "ActionsService", { enumerable: !0, get: function () { return r.ActionsService } }) }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.CookieService = void 0; var r = i(9), o = i(1), n = function () { function e() { } return e.prototype.set = function (e, t, i, n) { void 0 === e && (e = o.CookieValuesEnum.SessionId), void 0 === t && (t = r.Generator.uuidv4()), void 0 === i && (i = 18e5), void 0 === n && (n = ""); var s = new Date; s.setTime(s.getTime() + 24 * i * 60 * 60 * 1e3); var a = "expires=" + s.toUTCString(), c = n ? "; path=" + n : ""; document.cookie = e + "=" + t + "; " + a + c }, e.prototype.get = function (e) { void 0 === e && (e = o.CookieValuesEnum.SessionId); for (var t, i = document.cookie.split(";"), r = i.length, n = e + "=", s = 0; s < r; s += 1)if (0 == (t = i[s].replace(/^\s+/g, "")).indexOf(n)) return t.substring(n.length, t.length); return "" }, e.prototype.delete = function (e) { void 0 === e && (e = o.CookieValuesEnum.SessionId), this.set(e, "", -1) }, e }(); t.CookieService = n }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.App = void 0; var r = i(11), o = i(21), n = i(2), s = function () { function e() { this.config = n.Config.getInstance(), this.actionsService = new r.ActionsService, this.events = new o.Events } return e.getInstance = function () { return e.instance || (e.instance = new e), e.instance }, e.prototype.start = function (e, t, i, r, o) { console.log("Start"); var s = this.events, a = s.UserVisitsTheWebsite, c = s.UserSession; return this.config.init(e, t, i, r, o).then(this.actionsService.initProviders).then((function () { "undefined" != typeof TrackJS && !TrackJS.isInstalled() && n.configVariables.trackJSToken && TrackJS.install({ token: n.configVariables.trackJSToken }) })).then(a).then(c).then((function () { console.log("Done") })).catch((function (e) { console.error(e) })) }, e }(); t.App = s }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.Events = void 0; var r = i(5), o = i(10), n = i(1), s = i(9), a = function () { function e() { this.cookieService = new r.CookieService, this.publicEventService = new o.PublicEventService, this.UserVisitsTheWebsite = this.UserVisitsTheWebsite.bind(this), this.UserSession = this.UserSession.bind(this) } return e.prototype.UserVisitsTheWebsite = function () { var e = this; return this.promiseFunction((function () { e.publicEventService.visit(); e.cookieService.get(n.CookieValuesEnum.VisitorId) || e.cookieService.set(n.CookieValuesEnum.VisitorId, s.Generator.uuidv4(), 365) })) }, e.prototype.UserSession = function () { var e = this; return this.promiseFunction((function () { var t = e.cookieService.get(); t ? e.cookieService.set(n.CookieValuesEnum.SessionId, t, .02) : e.cookieService.set(n.CookieValuesEnum.SessionId, s.Generator.uuidv4(), .02) })) }, e.prototype.promiseFunction = function (e) { return new Promise((function (t, i) { try { t(e()) } catch (e) { i(e.message || e) } })) }, e }(); t.Events = a }, function (e, t, i) { "use strict"; var r, o, n, s; Object.defineProperty(t, "__esModule", { value: !0 }), t.EnvironmentVariables = void 0; var a = i(0), c = i(3); t.EnvironmentVariables = ((r = {})[c.Environment.Production] = ((o = {})[a.Project.Artlist] = { attributionEventsHttpUrl: "https://events.artlist.io/AttributionEvent/send", mixpanelToken: "c434bf1fda892148f8348f66c883b26c", trackJSToken: "f935be2b79204a04879fc17ff997615a" }, o[a.Project.Artgrid] = { attributionEventsHttpUrl: "https://artlist-attribution-events.azurewebsites.net/AttributionEvent/artgrid/send", mixpanelToken: "f8a9845e410540f9d198fcb4f7bad716", trackJSToken: "f935be2b79204a04879fc17ff997615a" }, o), r[c.Environment.Test] = ((n = {})[a.Project.Artlist] = { attributionEventsHttpUrl: "https://dev-attribution-events.azurewebsites.net/AttributionEvent/send", mixpanelToken: "efac7cbd2124b709dfb36f1666d15571", trackJSToken: "" }, n[a.Project.Artgrid] = { attributionEventsHttpUrl: "https://dev-attribution-events.azurewebsites.net/AttributionEvent/artgrid/send", mixpanelToken: "ed39492453b934623f654601f8a21153", trackJSToken: "" }, n), r[c.Environment.Development] = ((s = {})[a.Project.Artlist] = { attributionEventsHttpUrl: "https://localhost:44362/AttributionEvent/send", mixpanelToken: "efac7cbd2124b709dfb36f1666d15571", trackJSToken: "" }, s[a.Project.Artgrid] = { attributionEventsHttpUrl: "https://localhost:44362/AttributionEvent/artgrid/send", mixpanelToken: "ed39492453b934623f654601f8a21153", trackJSToken: "" }, s), r) }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); var r = i(24), o = i(27), n = i(33); t.default = { Mixpanel: r.Mixpanel.getInstance(), Snowflake: o.Snowflake.getInstance(), Hotjar: n.Hotjar.getInstance() } }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); var r = i(25); Object.defineProperty(t, "Mixpanel", { enumerable: !0, get: function () { return r.Mixpanel } }) }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.Mixpanel = void 0; var r = i(2), o = i(26), n = function () { function e() { this.isEnabled = !0, this.people = { set: function (e, t, i) { this.isDisabled && o.people.set(e, t, i) } } } return e.getInstance = function () { return e.instance || (e.instance = new e), e.instance }, e.prototype.init = function () { this.isEnabled && o.init(r.configVariables.mixpanelToken) }, e.prototype.disable = function () { this.isEnabled = !1 }, e.prototype.enable = function () { this.isEnabled = !0 }, e.prototype.track = function (e) { this.isEnabled && o.track(e.event, e.properties) }, e.prototype.register = function (e, t) { this.isEnabled && o.register(e, t) }, e.prototype.identify = function (e) { this.isEnabled && o.identify(e) }, e.prototype.get_property = function (e) { return o.get_property(e) }, e }(); t.Mixpanel = n }, function (e, t, i) { "use strict"; var r, o = { DEBUG: !1, LIB_VERSION: "2.39.0" }; if ("undefined" == typeof window) { var n = { hostname: "" }; r = { navigator: { userAgent: "" }, document: { location: n, referrer: "" }, screen: { width: 0, height: 0 }, location: n } } else r = window; var s, a, c, p, u, _, l, d, h, f, m, g = Array.prototype, v = Function.prototype, y = Object.prototype, b = g.slice, k = y.toString, w = y.hasOwnProperty, x = r.console, S = r.navigator, P = r.document, O = r.opera, I = r.screen, E = S.userAgent, T = v.bind, F = g.forEach, H = g.indexOf, M = g.map, j = Array.isArray, N = {}, A = { trim: function (e) { return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "") } }, q = { log: function () { if (o.DEBUG && !A.isUndefined(x) && x) try { x.log.apply(x, arguments) } catch (e) { A.each(arguments, (function (e) { x.log(e) })) } }, error: function () { if (o.DEBUG && !A.isUndefined(x) && x) { var e = ["Mixpanel error:"].concat(A.toArray(arguments)); try { x.error.apply(x, e) } catch (t) { A.each(e, (function (e) { x.error(e) })) } } }, critical: function () { if (!A.isUndefined(x) && x) { var e = ["Mixpanel error:"].concat(A.toArray(arguments)); try { x.error.apply(x, e) } catch (t) { A.each(e, (function (e) { x.error(e) })) } } } }, U = function (e, t) { return function () { return arguments[0] = "[" + t + "] " + arguments[0], e.apply(q, arguments) } }, D = function (e) { return { log: U(q.log, e), error: U(q.error, e), critical: U(q.critical, e) } }; A.bind = function (e, t) { var i, r; if (T && e.bind === T) return T.apply(e, b.call(arguments, 1)); if (!A.isFunction(e)) throw new TypeError; return i = b.call(arguments, 2), r = function () { if (!(this instanceof r)) return e.apply(t, i.concat(b.call(arguments))); var o = {}; o.prototype = e.prototype; var n = new o; o.prototype = null; var s = e.apply(n, i.concat(b.call(arguments))); return Object(s) === s ? s : n } }, A.bind_instance_methods = function (e) { for (var t in e) "function" == typeof e[t] && (e[t] = A.bind(e[t], e)) }, A.each = function (e, t, i) { if (null != e) if (F && e.forEach === F) e.forEach(t, i); else if (e.length === +e.length) { for (var r = 0, o = e.length; r < o; r++)if (r in e && t.call(i, e[r], r, e) === N) return } else for (var n in e) if (w.call(e, n) && t.call(i, e[n], n, e) === N) return }, A.escapeHTML = function (e) { var t = e; return t && A.isString(t) && (t = t.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#039;")), t }, A.extend = function (e) { return A.each(b.call(arguments, 1), (function (t) { for (var i in t) void 0 !== t[i] && (e[i] = t[i]) })), e }, A.isArray = j || function (e) { return "[object Array]" === k.call(e) }, A.isFunction = function (e) { try { return /^\s*\bfunction\b/.test(e) } catch (e) { return !1 } }, A.isArguments = function (e) { return !(!e || !w.call(e, "callee")) }, A.toArray = function (e) { return e ? e.toArray ? e.toArray() : A.isArray(e) || A.isArguments(e) ? b.call(e) : A.values(e) : [] }, A.map = function (e, t) { if (M && e.map === M) return e.map(t); var i = []; return A.each(e, (function (e) { i.push(t(e)) })), i }, A.keys = function (e) { var t = []; return null === e || A.each(e, (function (e, i) { t[t.length] = i })), t }, A.values = function (e) { var t = []; return null === e || A.each(e, (function (e) { t[t.length] = e })), t }, A.identity = function (e) { return e }, A.include = function (e, t) { var i = !1; return null === e ? i : H && e.indexOf === H ? -1 != e.indexOf(t) : (A.each(e, (function (e) { if (i || (i = e === t)) return N })), i) }, A.includes = function (e, t) { return -1 !== e.indexOf(t) }, A.inherit = function (e, t) { return e.prototype = new t, e.prototype.constructor = e, e.superclass = t.prototype, e }, A.isObject = function (e) { return e === Object(e) && !A.isArray(e) }, A.isEmptyObject = function (e) { if (A.isObject(e)) { for (var t in e) if (w.call(e, t)) return !1; return !0 } return !1 }, A.isUndefined = function (e) { return void 0 === e }, A.isString = function (e) { return "[object String]" == k.call(e) }, A.isDate = function (e) { return "[object Date]" == k.call(e) }, A.isNumber = function (e) { return "[object Number]" == k.call(e) }, A.isElement = function (e) { return !(!e || 1 !== e.nodeType) }, A.encodeDates = function (e) { return A.each(e, (function (t, i) { A.isDate(t) ? e[i] = A.formatDate(t) : A.isObject(t) && (e[i] = A.encodeDates(t)) })), e }, A.timestamp = function () { return Date.now = Date.now || function () { return +new Date }, Date.now() }, A.formatDate = function (e) { function t(e) { return e < 10 ? "0" + e : e } return e.getUTCFullYear() + "-" + t(e.getUTCMonth() + 1) + "-" + t(e.getUTCDate()) + "T" + t(e.getUTCHours()) + ":" + t(e.getUTCMinutes()) + ":" + t(e.getUTCSeconds()) }, A.safewrap = function (e) { return function () { try { return e.apply(this, arguments) } catch (e) { q.critical("Implementation error. Please turn on debug and contact support@mixpanel.com."), o.DEBUG && q.critical(e) } } }, A.safewrap_class = function (e, t) { for (var i = 0; i < t.length; i++)e.prototype[t[i]] = A.safewrap(e.prototype[t[i]]) }, A.safewrap_instance_methods = function (e) { for (var t in e) "function" == typeof e[t] && (e[t] = A.safewrap(e[t])) }, A.strip_empty_properties = function (e) { var t = {}; return A.each(e, (function (e, i) { A.isString(e) && e.length > 0 && (t[i] = e) })), t }, A.truncate = function (e, t) { var i; return "string" == typeof e ? i = e.slice(0, t) : A.isArray(e) ? (i = [], A.each(e, (function (e) { i.push(A.truncate(e, t)) }))) : A.isObject(e) ? (i = {}, A.each(e, (function (e, r) { i[r] = A.truncate(e, t) }))) : i = e, i }, A.JSONEncode = function (e) { var t = function (e) { var t = /[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g, i = { "\b": "\\b", "\t": "\\t", "\n": "\\n", "\f": "\\f", "\r": "\\r", '"': '\\"', "\\": "\\\\" }; return t.lastIndex = 0, t.test(e) ? '"' + e.replace(t, (function (e) { var t = i[e]; return "string" == typeof t ? t : "\\u" + ("0000" + e.charCodeAt(0).toString(16)).slice(-4) })) + '"' : '"' + e + '"' }, i = function (e, r) { var o = "", n = 0, s = "", a = "", c = 0, p = o, u = [], _ = r[e]; switch (_ && "object" == typeof _ && "function" == typeof _.toJSON && (_ = _.toJSON(e)), typeof _) { case "string": return t(_); case "number": return isFinite(_) ? String(_) : "null"; case "boolean": case "null": return String(_); case "object": if (!_) return "null"; if (o += "    ", u = [], "[object Array]" === k.apply(_)) { for (c = _.length, n = 0; n < c; n += 1)u[n] = i(n, _) || "null"; return a = 0 === u.length ? "[]" : o ? "[\n" + o + u.join(",\n" + o) + "\n" + p + "]" : "[" + u.join(",") + "]", o = p, a } for (s in _) w.call(_, s) && (a = i(s, _)) && u.push(t(s) + (o ? ": " : ":") + a); return a = 0 === u.length ? "{}" : o ? "{" + u.join(",") + p + "}" : "{" + u.join(",") + "}", o = p, a } }; return i("", { "": e }) }, A.JSONDecode = (u = { '"': '"', "\\": "\\", "/": "/", b: "\b", f: "\f", n: "\n", r: "\r", t: "\t" }, _ = function (e) { var t = new SyntaxError(e); throw t.at = s, t.text = c, t }, l = function (e) { return e && e !== a && _("Expected '" + e + "' instead of '" + a + "'"), a = c.charAt(s), s += 1, a }, d = function () { var e, t = ""; for ("-" === a && (t = "-", l("-")); a >= "0" && a <= "9";)t += a, l(); if ("." === a) for (t += "."; l() && a >= "0" && a <= "9";)t += a; if ("e" === a || "E" === a) for (t += a, l(), "-" !== a && "+" !== a || (t += a, l()); a >= "0" && a <= "9";)t += a, l(); if (e = +t, isFinite(e)) return e; _("Bad number") }, h = function () { var e, t, i, r = ""; if ('"' === a) for (; l();) { if ('"' === a) return l(), r; if ("\\" === a) if (l(), "u" === a) { for (i = 0, t = 0; t < 4 && (e = parseInt(l(), 16), isFinite(e)); t += 1)i = 16 * i + e; r += String.fromCharCode(i) } else { if ("string" != typeof u[a]) break; r += u[a] } else r += a } _("Bad string") }, f = function () { for (; a && a <= " ";)l() }, p = function () { switch (f(), a) { case "{": return function () { var e, t = {}; if ("{" === a) { if (l("{"), f(), "}" === a) return l("}"), t; for (; a;) { if (e = h(), f(), l(":"), Object.hasOwnProperty.call(t, e) && _('Duplicate key "' + e + '"'), t[e] = p(), f(), "}" === a) return l("}"), t; l(","), f() } } _("Bad object") }(); case "[": return function () { var e = []; if ("[" === a) { if (l("["), f(), "]" === a) return l("]"), e; for (; a;) { if (e.push(p()), f(), "]" === a) return l("]"), e; l(","), f() } } _("Bad array") }(); case '"': return h(); case "-": return d(); default: return a >= "0" && a <= "9" ? d() : function () { switch (a) { case "t": return l("t"), l("r"), l("u"), l("e"), !0; case "f": return l("f"), l("a"), l("l"), l("s"), l("e"), !1; case "n": return l("n"), l("u"), l("l"), l("l"), null }_('Unexpected "' + a + '"') }() } }, function (e) { var t; return c = e, s = 0, a = " ", t = p(), f(), a && _("Syntax error"), t }), A.base64Encode = function (e) { var t, i, r, o, n, s = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", a = 0, c = 0, p = "", u = []; if (!e) return e; e = A.utf8Encode(e); do { t = (n = e.charCodeAt(a++) << 16 | e.charCodeAt(a++) << 8 | e.charCodeAt(a++)) >> 18 & 63, i = n >> 12 & 63, r = n >> 6 & 63, o = 63 & n, u[c++] = s.charAt(t) + s.charAt(i) + s.charAt(r) + s.charAt(o) } while (a < e.length); switch (p = u.join(""), e.length % 3) { case 1: p = p.slice(0, -2) + "=="; break; case 2: p = p.slice(0, -1) + "=" }return p }, A.utf8Encode = function (e) { var t, i, r, o, n = ""; for (t = i = 0, r = (e = (e + "").replace(/\r\n/g, "\n").replace(/\r/g, "\n")).length, o = 0; o < r; o++) { var s = e.charCodeAt(o), a = null; s < 128 ? i++ : a = s > 127 && s < 2048 ? String.fromCharCode(s >> 6 | 192, 63 & s | 128) : String.fromCharCode(s >> 12 | 224, s >> 6 & 63 | 128, 63 & s | 128), null !== a && (i > t && (n += e.substring(t, i)), n += a, t = i = o + 1) } return i > t && (n += e.substring(t, e.length)), n }, A.UUID = (m = function () { for (var e = 1 * new Date, t = 0; e == 1 * new Date;)t++; return e.toString(16) + t.toString(16) }, function () { var e = (I.height * I.width).toString(16); return m() + "-" + Math.random().toString(16).replace(".", "") + "-" + function () { var e, t, i = E, r = [], o = 0; function n(e, t) { var i, o = 0; for (i = 0; i < t.length; i++)o |= r[i] << 8 * i; return e ^ o } for (e = 0; e < i.length; e++)t = i.charCodeAt(e), r.unshift(255 & t), r.length >= 4 && (o = n(o, r), r = []); return r.length > 0 && (o = n(o, r)), o.toString(16) }() + "-" + e + "-" + m() }), A.isBlockedUA = function (e) { return !!/(google web preview|baiduspider|yandexbot|bingbot|googlebot|yahoo! slurp)/i.test(e) }, A.HTTPBuildQuery = function (e, t) { var i, r, o = []; return A.isUndefined(t) && (t = "&"), A.each(e, (function (e, t) { i = encodeURIComponent(e.toString()), r = encodeURIComponent(t), o[o.length] = r + "=" + i })), o.join(t) }, A.getQueryParam = function (e, t) { t = t.replace(/[[]/, "\\[").replace(/[\]]/, "\\]"); var i = new RegExp("[\\?&]" + t + "=([^&#]*)").exec(e); if (null === i || i && "string" != typeof i[1] && i[1].length) return ""; var r = i[1]; try { r = decodeURIComponent(r) } catch (e) { q.error("Skipping decoding for malformed query param: " + r) } return r.replace(/\+/g, " ") }, A.getHashParam = function (e, t) { var i = e.match(new RegExp(t + "=([^&]*)")); return i ? i[1] : null }, A.cookie = { get: function (e) { for (var t = e + "=", i = P.cookie.split(";"), r = 0; r < i.length; r++) { for (var o = i[r]; " " == o.charAt(0);)o = o.substring(1, o.length); if (0 === o.indexOf(t)) return decodeURIComponent(o.substring(t.length, o.length)) } return null }, parse: function (e) { var t; try { t = A.JSONDecode(A.cookie.get(e)) || {} } catch (e) { } return t }, set_seconds: function (e, t, i, r, o, n, s) { var a = "", c = "", p = ""; if (s) a = "; domain=" + s; else if (r) { var u = z(P.location.hostname); a = u ? "; domain=." + u : "" } if (i) { var _ = new Date; _.setTime(_.getTime() + 1e3 * i), c = "; expires=" + _.toGMTString() } n && (o = !0, p = "; SameSite=None"), o && (p += "; secure"), P.cookie = e + "=" + encodeURIComponent(t) + c + "; path=/" + a + p }, set: function (e, t, i, r, o, n, s) { var a = "", c = "", p = ""; if (s) a = "; domain=" + s; else if (r) { var u = z(P.location.hostname); a = u ? "; domain=." + u : "" } if (i) { var _ = new Date; _.setTime(_.getTime() + 24 * i * 60 * 60 * 1e3), c = "; expires=" + _.toGMTString() } n && (o = !0, p = "; SameSite=None"), o && (p += "; secure"); var l = e + "=" + encodeURIComponent(t) + c + "; path=/" + a + p; return P.cookie = l, l }, remove: function (e, t, i) { A.cookie.set(e, "", -1, t, !1, !1, i) } }; var $ = null, B = function (e, t) { if (null !== $ && !t) return $; var i = !0; try { e = e || window.localStorage; var r = "__mplss_" + R(8); e.setItem(r, "xyz"), "xyz" !== e.getItem(r) && (i = !1), e.removeItem(r) } catch (e) { i = !1 } return $ = i, i }; A.localStorage = { is_supported: function (e) { var t = B(null, e); return t || q.error("localStorage unsupported; falling back to cookie store"), t }, error: function (e) { q.error("localStorage error: " + e) }, get: function (e) { try { return window.localStorage.getItem(e) } catch (e) { A.localStorage.error(e) } return null }, parse: function (e) { try { return A.JSONDecode(A.localStorage.get(e)) || {} } catch (e) { } return null }, set: function (e, t) { try { window.localStorage.setItem(e, t) } catch (e) { A.localStorage.error(e) } }, remove: function (e) { try { window.localStorage.removeItem(e) } catch (e) { A.localStorage.error(e) } } }, A.register_event = function () { function e(t) { return t && (t.preventDefault = e.preventDefault, t.stopPropagation = e.stopPropagation), t } return e.preventDefault = function () { this.returnValue = !1 }, e.stopPropagation = function () { this.cancelBubble = !0 }, function (t, i, r, o, n) { if (t) if (t.addEventListener && !o) t.addEventListener(i, r, !!n); else { var s = "on" + i, a = t[s]; t[s] = function (t, i, r) { return function (o) { if (o = o || e(window.event)) { var n, s, a = !0; return A.isFunction(r) && (n = r(o)), s = i.call(t, o), !1 !== n && !1 !== s || (a = !1), a } } }(t, r, a) } else q.error("No valid element provided to register_event") } }(); var C = new RegExp('^(\\w*)\\[(\\w+)([=~\\|\\^\\$\\*]?)=?"?([^\\]"]*)"?\\]$'); A.dom_query = function () { function e(e) { return e.all ? e.all : e.getElementsByTagName("*") } var t = /[\t\r\n]/g; function i(e, i) { var r = " " + i + " "; return (" " + e.className + " ").replace(t, " ").indexOf(r) >= 0 } function r(t) { if (!P.getElementsByTagName) return []; var r, o, n, s, a, c, p, u, _, l, d = t.split(" "), h = [P]; for (c = 0; c < d.length; c++)if ((r = d[c].replace(/^\s+/, "").replace(/\s+$/, "")).indexOf("#") > -1) { n = (o = r.split("#"))[0]; var f = o[1], m = P.getElementById(f); if (!m || n && m.nodeName.toLowerCase() != n) return []; h = [m] } else if (r.indexOf(".") > -1) { n = (o = r.split("."))[0]; var g = o[1]; for (n || (n = "*"), s = [], a = 0, p = 0; p < h.length; p++)for (_ = "*" == n ? e(h[p]) : h[p].getElementsByTagName(n), u = 0; u < _.length; u++)s[a++] = _[u]; for (h = [], l = 0, p = 0; p < s.length; p++)s[p].className && A.isString(s[p].className) && i(s[p], g) && (h[l++] = s[p]) } else { var v = r.match(C); if (v) { n = v[1]; var y, b = v[2], k = v[3], w = v[4]; for (n || (n = "*"), s = [], a = 0, p = 0; p < h.length; p++)for (_ = "*" == n ? e(h[p]) : h[p].getElementsByTagName(n), u = 0; u < _.length; u++)s[a++] = _[u]; switch (h = [], l = 0, k) { case "=": y = function (e) { return e.getAttribute(b) == w }; break; case "~": y = function (e) { return e.getAttribute(b).match(new RegExp("\\b" + w + "\\b")) }; break; case "|": y = function (e) { return e.getAttribute(b).match(new RegExp("^" + w + "-?")) }; break; case "^": y = function (e) { return 0 === e.getAttribute(b).indexOf(w) }; break; case "$": y = function (e) { return e.getAttribute(b).lastIndexOf(w) == e.getAttribute(b).length - w.length }; break; case "*": y = function (e) { return e.getAttribute(b).indexOf(w) > -1 }; break; default: y = function (e) { return e.getAttribute(b) } }for (h = [], l = 0, p = 0; p < s.length; p++)y(s[p]) && (h[l++] = s[p]) } else { for (n = r, s = [], a = 0, p = 0; p < h.length; p++)for (_ = h[p].getElementsByTagName(n), u = 0; u < _.length; u++)s[a++] = _[u]; h = s } } return h } return function (e) { return A.isElement(e) ? [e] : A.isObject(e) && !A.isUndefined(e.length) ? e : r.call(this, e) } }(), A.info = { campaignParams: function () { var e = "utm_source utm_medium utm_campaign utm_content utm_term".split(" "), t = "", i = {}; return A.each(e, (function (e) { (t = A.getQueryParam(P.URL, e)).length && (i[e] = t) })), i }, searchEngine: function (e) { return 0 === e.search("https?://(.*)google.([^/?]*)") ? "google" : 0 === e.search("https?://(.*)bing.com") ? "bing" : 0 === e.search("https?://(.*)yahoo.com") ? "yahoo" : 0 === e.search("https?://(.*)duckduckgo.com") ? "duckduckgo" : null }, searchInfo: function (e) { var t = A.info.searchEngine(e), i = "yahoo" != t ? "q" : "p", r = {}; if (null !== t) { r.$search_engine = t; var o = A.getQueryParam(e, i); o.length && (r.mp_keyword = o) } return r }, browser: function (e, t, i) { return t = t || "", i || A.includes(e, " OPR/") ? A.includes(e, "Mini") ? "Opera Mini" : "Opera" : /(BlackBerry|PlayBook|BB10)/i.test(e) ? "BlackBerry" : A.includes(e, "IEMobile") || A.includes(e, "WPDesktop") ? "Internet Explorer Mobile" : A.includes(e, "SamsungBrowser/") ? "Samsung Internet" : A.includes(e, "Edge") || A.includes(e, "Edg/") ? "Microsoft Edge" : A.includes(e, "FBIOS") ? "Facebook Mobile" : A.includes(e, "Chrome") ? "Chrome" : A.includes(e, "CriOS") ? "Chrome iOS" : A.includes(e, "UCWEB") || A.includes(e, "UCBrowser") ? "UC Browser" : A.includes(e, "FxiOS") ? "Firefox iOS" : A.includes(t, "Apple") ? A.includes(e, "Mobile") ? "Mobile Safari" : "Safari" : A.includes(e, "Android") ? "Android Mobile" : A.includes(e, "Konqueror") ? "Konqueror" : A.includes(e, "Firefox") ? "Firefox" : A.includes(e, "MSIE") || A.includes(e, "Trident/") ? "Internet Explorer" : A.includes(e, "Gecko") ? "Mozilla" : "" }, browserVersion: function (e, t, i) { var r = { "Internet Explorer Mobile": /rv:(\d+(\.\d+)?)/, "Microsoft Edge": /Edge?\/(\d+(\.\d+)?)/, Chrome: /Chrome\/(\d+(\.\d+)?)/, "Chrome iOS": /CriOS\/(\d+(\.\d+)?)/, "UC Browser": /(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/, Safari: /Version\/(\d+(\.\d+)?)/, "Mobile Safari": /Version\/(\d+(\.\d+)?)/, Opera: /(Opera|OPR)\/(\d+(\.\d+)?)/, Firefox: /Firefox\/(\d+(\.\d+)?)/, "Firefox iOS": /FxiOS\/(\d+(\.\d+)?)/, Konqueror: /Konqueror:(\d+(\.\d+)?)/, BlackBerry: /BlackBerry (\d+(\.\d+)?)/, "Android Mobile": /android\s(\d+(\.\d+)?)/, "Samsung Internet": /SamsungBrowser\/(\d+(\.\d+)?)/, "Internet Explorer": /(rv:|MSIE )(\d+(\.\d+)?)/, Mozilla: /rv:(\d+(\.\d+)?)/ }[A.info.browser(e, t, i)]; if (void 0 === r) return null; var o = e.match(r); return o ? parseFloat(o[o.length - 2]) : null }, os: function () { var e = E; return /Windows/i.test(e) ? /Phone/.test(e) || /WPDesktop/.test(e) ? "Windows Phone" : "Windows" : /(iPhone|iPad|iPod)/.test(e) ? "iOS" : /Android/.test(e) ? "Android" : /(BlackBerry|PlayBook|BB10)/i.test(e) ? "BlackBerry" : /Mac/i.test(e) ? "Mac OS X" : /Linux/.test(e) ? "Linux" : /CrOS/.test(e) ? "Chrome OS" : "" }, device: function (e) { return /Windows Phone/i.test(e) || /WPDesktop/.test(e) ? "Windows Phone" : /iPad/.test(e) ? "iPad" : /iPod/.test(e) ? "iPod Touch" : /iPhone/.test(e) ? "iPhone" : /(BlackBerry|PlayBook|BB10)/i.test(e) ? "BlackBerry" : /Android/.test(e) ? "Android" : "" }, referringDomain: function (e) { var t = e.split("/"); return t.length >= 3 ? t[2] : "" }, properties: function () { return A.extend(A.strip_empty_properties({ $os: A.info.os(), $browser: A.info.browser(E, S.vendor, O), $referrer: P.referrer, $referring_domain: A.info.referringDomain(P.referrer), $device: A.info.device(E) }), { $current_url: r.location.href, $browser_version: A.info.browserVersion(E, S.vendor, O), $screen_height: I.height, $screen_width: I.width, mp_lib: "web", $lib_version: o.LIB_VERSION, $insert_id: R(), time: A.timestamp() / 1e3 }) }, people_properties: function () { return A.extend(A.strip_empty_properties({ $os: A.info.os(), $browser: A.info.browser(E, S.vendor, O) }), { $browser_version: A.info.browserVersion(E, S.vendor, O) }) }, pageviewInfo: function (e) { return A.strip_empty_properties({ mp_page: e, mp_referrer: P.referrer, mp_browser: A.info.browser(E, S.vendor, O), mp_platform: A.info.os() }) } }; var R = function (e) { var t = Math.random().toString(36).substring(2, 10) + Math.random().toString(36).substring(2, 10); return e ? t.substring(0, e) : t }, V = A.safewrap((function (e, t, i) { e += t; for (var r = 5381, o = 0; o < e.length; o++)r = (r << 5) + r + e.charCodeAt(o), r &= r; return (r >>> 0) % 100 < i })), L = /[a-z0-9][a-z0-9-]*\.[a-z]+$/i, J = /[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i, z = function (e) { var t = J, i = e.split("."), r = i[i.length - 1]; (r.length > 4 || "com" === r || "org" === r) && (t = L); var o = e.match(t); return o ? o[0] : "" }, G = null, W = null; function X(e) { switch (typeof e.className) { case "string": return e.className; case "object": return e.className.baseVal || e.getAttribute("class") || ""; default: return "" } } function K(e) { return e && 1 === e.nodeType } function Y(e, t) { return e && e.tagName && e.tagName.toLowerCase() === t.toLowerCase() } function Q(e) { return e && 3 === e.nodeType } function Z(e) { for (var t = e; t.parentNode && !Y(t, "body"); t = t.parentNode) { var i = X(t).split(" "); if (A.includes(i, "mp-sensitive") || A.includes(i, "mp-no-track")) return !1 } if (A.includes(X(e).split(" "), "mp-include")) return !0; if (Y(e, "input") || Y(e, "select") || Y(e, "textarea") || "true" === e.getAttribute("contenteditable")) return !1; var r = e.type || ""; if ("string" == typeof r) switch (r.toLowerCase()) { case "hidden": case "password": return !1 }var o = e.name || e.id || ""; if ("string" == typeof o) { if (/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(o.replace(/[^a-zA-Z0-9]/g, ""))) return !1 } return !0 } function ee(e) { if (null === e || A.isUndefined(e)) return !1; if ("string" == typeof e) { e = A.trim(e); if (/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/.test((e || "").replace(/[- ]/g, ""))) return !1; if (/(^\d{3}-?\d{2}-?\d{4}$)/.test(e)) return !1 } return !0 } "undefined" != typeof JSON && (G = JSON.stringify, W = JSON.parse), G = G || A.JSONEncode, W = W || A.JSONDecode, A.toArray = A.toArray, A.isObject = A.isObject, A.JSONEncode = A.JSONEncode, A.JSONDecode = A.JSONDecode, A.isBlockedUA = A.isBlockedUA, A.isEmptyObject = A.isEmptyObject, A.info = A.info, A.info.device = A.info.device, A.info.browser = A.info.browser, A.info.browserVersion = A.info.browserVersion, A.info.properties = A.info.properties; var te = { _initializedTokens: [], _previousElementSibling: function (e) { if (e.previousElementSibling) return e.previousElementSibling; do { e = e.previousSibling } while (e && !K(e)); return e }, _loadScript: function (e, t) { var i = document.createElement("script"); i.type = "text/javascript", i.src = e, i.onload = t; var r = document.getElementsByTagName("script"); r.length > 0 ? r[0].parentNode.insertBefore(i, r[0]) : document.body.appendChild(i) }, _getPropertiesFromElement: function (e) { var t = { classes: X(e).split(" "), tag_name: e.tagName.toLowerCase() }; Z(e) && A.each(e.attributes, (function (e) { ee(e.value) && (t["attr__" + e.name] = e.value) })); for (var i = 1, r = 1, o = e; o = this._previousElementSibling(o);)i++, o.tagName === e.tagName && r++; return t.nth_child = i, t.nth_of_type = r, t }, _getDefaultProperties: function (e) { return { $event_type: e, $ce_version: 1, $host: window.location.host, $pathname: window.location.pathname } }, _extractCustomPropertyValue: function (e) { var t = []; return A.each(document.querySelectorAll(e.css_selector), (function (e) { var i;["input", "select"].indexOf(e.tagName.toLowerCase()) > -1 ? i = e.value : e.textContent && (i = e.textContent), ee(i) && t.push(i) })), t.join(", ") }, _getCustomProperties: function (e) { var t = {}; return A.each(this._customProperties, (function (i) { A.each(i.event_selectors, (function (r) { var o = document.querySelectorAll(r); A.each(o, (function (r) { A.includes(e, r) && Z(r) && (t[i.name] = this._extractCustomPropertyValue(i)) }), this) }), this) }), this), t }, _getEventTarget: function (e) { return void 0 === e.target ? e.srcElement : e.target }, _trackEvent: function (e, t) { var i, r, o = this._getEventTarget(e); if (Q(o) && (o = o.parentNode), function (e, t) { if (!e || Y(e, "html") || !K(e)) return !1; switch (e.tagName.toLowerCase()) { case "html": return !1; case "form": return "submit" === t.type; case "input": return -1 === ["button", "submit"].indexOf(e.getAttribute("type")) ? "change" === t.type : "click" === t.type; case "select": case "textarea": return "change" === t.type; default: return "click" === t.type } }(o, e)) { for (var n = [o], s = o; s.parentNode && !Y(s, "body");)n.push(s.parentNode), s = s.parentNode; var a, c, p = [], u = !1; if (A.each(n, (function (e) { var t = Z(e); "a" === e.tagName.toLowerCase() && (a = e.getAttribute("href"), a = t && ee(a) && a); var i = X(e).split(" "); A.includes(i, "mp-no-track") && (u = !0), p.push(this._getPropertiesFromElement(e)) }), this), u) return !1; var _ = (r = "", Z(i = o) && i.childNodes && i.childNodes.length && A.each(i.childNodes, (function (e) { Q(e) && e.textContent && (r += A.trim(e.textContent).split(/(\s+)/).filter(ee).join("").replace(/[\r\n]/g, " ").replace(/[ ]+/g, " ").substring(0, 255)) })), A.trim(r)); _ && _.length && (c = _); var l = A.extend(this._getDefaultProperties(e.type), { $elements: p, $el_attr__href: a, $el_text: c }, this._getCustomProperties(n)); return t.track("$web_event", l), !0 } }, _navigate: function (e) { window.location.href = e }, _addDomEventHandlers: function (e) { var t = A.bind((function (t) { t = t || window.event, this._trackEvent(t, e) }), this); A.register_event(document, "submit", t, !1, !0), A.register_event(document, "change", t, !1, !0), A.register_event(document, "click", t, !1, !0) }, _customProperties: {}, init: function (e) { if (document && document.body) { var t = e.get_config("token"); if (this._initializedTokens.indexOf(t) > -1) console.log('autotrack already initialized for token "' + t + '"'); else if (this._initializedTokens.push(t), !this._maybeLoadEditor(e)) { var i = A.bind((function (t) { t && t.config && !0 === t.config.enable_collect_everything ? (t.custom_properties && (this._customProperties = t.custom_properties), e.track("$web_event", A.extend({ $title: document.title }, this._getDefaultProperties("pageview"))), this._addDomEventHandlers(e)) : e.__autotrack_enabled = !1 }), this); e._send_request(e.get_config("api_host") + "/decide/", { verbose: !0, version: "1", lib: "web", token: t }, { method: "GET", transport: "XHR" }, e._prepare_callback(i)) } } else { console.log("document not ready yet, trying again in 500 milliseconds..."); var r = this; setTimeout((function () { r.init(e) }), 500) } }, _editorParamsFromHash: function (e, t) { var i; try { var r = A.getHashParam(t, "state"); r = JSON.parse(decodeURIComponent(r)); var o = A.getHashParam(t, "expires_in"); i = { accessToken: A.getHashParam(t, "access_token"), accessTokenExpiresAt: (new Date).getTime() + 1e3 * Number(o), bookmarkletMode: !!r.bookmarkletMode, projectId: r.projectId, projectOwnerId: r.projectOwnerId, projectToken: r.token, readOnly: r.readOnly, userFlags: r.userFlags, userId: r.userId }, window.sessionStorage.setItem("editorParams", JSON.stringify(i)), r.desiredHash ? window.location.hash = r.desiredHash : window.history ? history.replaceState("", document.title, window.location.pathname + window.location.search) : window.location.hash = "" } catch (e) { console.error("Unable to parse data from hash", e) } return i }, _maybeLoadEditor: function (e) { try { var t = !1; if (A.getHashParam(window.location.hash, "state")) { var i = A.getHashParam(window.location.hash, "state"); t = "mpeditor" === (i = JSON.parse(decodeURIComponent(i))).action } var r, o = !!window.sessionStorage.getItem("_mpcehash"); return t ? r = this._editorParamsFromHash(e, window.location.hash) : o ? (r = this._editorParamsFromHash(e, window.sessionStorage.getItem("_mpcehash")), window.sessionStorage.removeItem("_mpcehash")) : r = JSON.parse(window.sessionStorage.getItem("editorParams") || "{}"), !(!r.projectToken || e.get_config("token") !== r.projectToken) && (this._loadEditor(e, r), !0) } catch (e) { return !1 } }, _loadEditor: function (e, t) { if (!window._mpEditorLoaded) { window._mpEditorLoaded = !0; var i = e.get_config("app_host") + "/js-bundle/reports/collect-everything/editor.js?_ts=" + (new Date).getTime(); return this._loadScript(i, (function () { window.mp_load_editor(t) })), !0 } return !1 }, enabledForProject: function (e, t, i) { t = A.isUndefined(t) ? 10 : t, i = A.isUndefined(i) ? 10 : i; for (var r = 0, o = 0; o < e.length; o++)r += e.charCodeAt(o); return r % t < i }, isBrowserSupported: function () { return A.isFunction(document.querySelectorAll) } }; A.bind_instance_methods(te), A.safewrap_instance_methods(te); var ie = function () { }; ie.prototype.create_properties = function () { }, ie.prototype.event_handler = function () { }, ie.prototype.after_track_handler = function () { }, ie.prototype.init = function (e) { return this.mp = e, this }, ie.prototype.track = function (e, t, i, r) { var o = this, n = A.dom_query(e); if (0 !== n.length) return A.each(n, (function (e) { A.register_event(e, this.override_event, (function (e) { var n = {}, s = o.create_properties(i, this), a = o.mp.get_config("track_links_timeout"); o.event_handler(e, this, n), window.setTimeout(o.track_callback(r, s, n, !0), a), o.mp.track(t, s, o.track_callback(r, s, n)) })) }), this), !0; q.error("The DOM query (" + e + ") returned 0 elements") }, ie.prototype.track_callback = function (e, t, i, r) { r = r || !1; var o = this; return function () { i.callback_fired || (i.callback_fired = !0, e && !1 === e(r, t) || o.after_track_handler(t, i, r)) } }, ie.prototype.create_properties = function (e, t) { return "function" == typeof e ? e(t) : A.extend({}, e) }; var re = function () { this.override_event = "click" }; A.inherit(re, ie), re.prototype.create_properties = function (e, t) { var i = re.superclass.create_properties.apply(this, arguments); return t.href && (i.url = t.href), i }, re.prototype.event_handler = function (e, t, i) { i.new_tab = 2 === e.which || e.metaKey || e.ctrlKey || "_blank" === t.target, i.href = t.href, i.new_tab || e.preventDefault() }, re.prototype.after_track_handler = function (e, t) { t.new_tab || setTimeout((function () { window.location = t.href }), 0) }; var oe = function () { this.override_event = "submit" }; A.inherit(oe, ie), oe.prototype.event_handler = function (e, t, i) { i.element = t, e.preventDefault() }, oe.prototype.after_track_handler = function (e, t) { setTimeout((function () { t.element.submit() }), 0) }; var ne = D("lock"), se = function (e, t) { t = t || {}, this.storageKey = e, this.storage = t.storage || window.localStorage, this.pollIntervalMS = t.pollIntervalMS || 100, this.timeoutMS = t.timeoutMS || 2e3 }; se.prototype.withLock = function (e, t, i) { i || "function" == typeof t || (i = t, t = null); var r = i || (new Date).getTime() + "|" + Math.random(), o = (new Date).getTime(), n = this.storageKey, s = this.pollIntervalMS, a = this.timeoutMS, c = this.storage, p = n + ":X", u = n + ":Y", _ = n + ":Z", l = function (e) { t && t(e) }, d = function (e) { if ((new Date).getTime() - o > a) return ne.error("Timeout waiting for mutex on " + n + "; clearing lock. [" + r + "]"), c.removeItem(_), c.removeItem(u), void m(); setTimeout((function () { try { e() } catch (e) { l(e) } }), s * (Math.random() + .1)) }, h = function (e, t) { e() ? t() : d((function () { h(e, t) })) }, f = function () { var e = c.getItem(u); if (e && e !== r) return !1; if (c.setItem(u, r), c.getItem(u) === r) return !0; if (!B(c, !0)) throw new Error("localStorage support dropped while acquiring lock"); return !1 }, m = function () { c.setItem(p, r), h(f, (function () { c.getItem(p) !== r ? d((function () { c.getItem(u) === r ? h((function () { return !c.getItem(_) }), g) : m() })) : g() })) }, g = function () { c.setItem(_, "1"); try { e() } finally { c.removeItem(_), c.getItem(u) === r && c.removeItem(u), c.getItem(p) === r && c.removeItem(p) } }; try { if (!B(c, !0)) throw new Error("localStorage support check failed"); m() } catch (e) { l(e) } }; var ae = D("batch"), ce = function (e, t) { t = t || {}, this.storageKey = e, this.storage = t.storage || window.localStorage, this.lock = new se(e, { storage: this.storage }), this.pid = t.pid || null, this.memQueue = [] }; ce.prototype.enqueue = function (e, t, i) { var r = { id: R(), flushAfter: (new Date).getTime() + 2 * t, payload: e }; this.lock.withLock(A.bind((function () { var t; try { var o = this.readFromStorage(); o.push(r), (t = this.saveToStorage(o)) && this.memQueue.push(r) } catch (i) { ae.error("Error enqueueing item", e), t = !1 } i && i(t) }), this), (function (e) { ae.error("Error acquiring storage lock", e), i && i(!1) }), this.pid) }, ce.prototype.fillBatch = function (e) { var t = this.memQueue.slice(0, e); if (t.length < e) { var i = this.readFromStorage(); if (i.length) { var r = {}; A.each(t, (function (e) { r[e.id] = !0 })); for (var o = 0; o < i.length; o++) { var n = i[o]; if ((new Date).getTime() > n.flushAfter && !r[n.id] && (t.push(n), t.length >= e)) break } } } return t }; var pe = function (e, t) { var i = []; return A.each(e, (function (e) { e.id && !t[e.id] && i.push(e) })), i }; ce.prototype.removeItemsByID = function (e, t) { var i = {}; A.each(e, (function (e) { i[e] = !0 })), this.memQueue = pe(this.memQueue, i), this.lock.withLock(A.bind((function () { var r; try { var o = this.readFromStorage(); o = pe(o, i), r = this.saveToStorage(o) } catch (t) { ae.error("Error removing items", e), r = !1 } t && t(r) }), this), (function (e) { ae.error("Error acquiring storage lock", e), t && t(!1) }), this.pid) }, ce.prototype.readFromStorage = function () { var e; try { (e = this.storage.getItem(this.storageKey)) && (e = W(e), A.isArray(e) || (ae.error("Invalid storage entry:", e), e = null)) } catch (t) { ae.error("Error retrieving queue", t), e = null } return e || [] }, ce.prototype.saveToStorage = function (e) { try { return this.storage.setItem(this.storageKey, G(e)), !0 } catch (e) { return ae.error("Error saving queue", e), !1 } }, ce.prototype.clear = function () { this.memQueue = [], this.storage.removeItem(this.storageKey) }; var ue = D("batch"), _e = function (e, t, i) { this.queue = new ce(e, { storage: i.storage }), this.endpoint = t, this.libConfig = i.libConfig, this.sendRequest = i.sendRequestFunc, this.batchSize = this.libConfig.batch_size, this.flushInterval = this.libConfig.batch_flush_interval_ms, this.stopped = !1 }; _e.prototype.enqueue = function (e, t) { this.queue.enqueue(e, this.flushInterval, t) }, _e.prototype.start = function () { this.stopped = !1, this.flush() }, _e.prototype.stop = function () { this.stopped = !0, this.timeoutID && (clearTimeout(this.timeoutID), this.timeoutID = null) }, _e.prototype.clear = function () { this.queue.clear() }, _e.prototype.resetBatchSize = function () { this.batchSize = this.libConfig.batch_size }, _e.prototype.resetFlush = function () { this.scheduleFlush(this.libConfig.batch_flush_interval_ms) }, _e.prototype.scheduleFlush = function (e) { this.flushInterval = e, this.stopped || (this.timeoutID = setTimeout(A.bind(this.flush, this), this.flushInterval)) }, _e.prototype.flush = function (e) { try { if (this.requestInProgress) return void ue.log("Flush: Request already in progress"); e = e || {}; var t = this.batchSize, i = this.queue.fillBatch(t); if (i.length < 1) return void this.resetFlush(); this.requestInProgress = !0; var r = this.libConfig.batch_request_timeout_ms, o = (new Date).getTime(), n = A.map(i, (function (e) { return e.payload })), s = A.bind((function (e) { this.requestInProgress = !1; try { var n = !1; if (A.isObject(e) && "timeout" === e.error && (new Date).getTime() - o >= r) ue.error("Network timeout; retrying"), this.flush(); else if (A.isObject(e) && e.xhr_req && (e.xhr_req.status >= 500 || e.xhr_req.status <= 0)) { var s = 2 * this.flushInterval, a = e.xhr_req.responseHeaders; if (a) { var c = a["Retry-After"]; c && (s = 1e3 * parseInt(c, 10) || s) } s = Math.min(6e5, s), ue.error("Error; retry in " + s + " ms"), this.scheduleFlush(s) } else if (A.isObject(e) && e.xhr_req && 413 === e.xhr_req.status) if (i.length > 1) { var p = Math.max(1, Math.floor(t / 2)); this.batchSize = Math.min(this.batchSize, p, i.length - 1), ue.error("413 response; reducing batch size to " + this.batchSize), this.resetFlush() } else ue.error("Single-event request too large; dropping", i), this.resetBatchSize(), n = !0; else n = !0; n && this.queue.removeItemsByID(A.map(i, (function (e) { return e.id })), A.bind(this.flush, this)) } catch (e) { ue.error("Error handling API response", e), this.resetFlush() } }), this), a = { method: "POST", verbose: !0, ignore_json_errors: !0, timeout_ms: r }; e.sendBeacon && (a.transport = "sendBeacon"), ue.log("MIXPANEL REQUEST:", this.endpoint, n), this.sendRequest(this.endpoint, n, a, s) } catch (e) { ue.error("Error flushing request queue", e), this.resetFlush() } }; function le(e, t) { xe(!0, e, t) } function de(e, t) { xe(!1, e, t) } function he(e, t) { return "1" === we(e, t) } function fe(e, t) { return !!function (e) { if (e && e.ignoreDnt) return !1; var t = e && e.window || r, i = t.navigator || {}, o = !1; return A.each([i.doNotTrack, i.msDoNotTrack, t.doNotTrack], (function (e) { A.includes([!0, 1, "1", "yes"], e) && (o = !0) })), o }(t) || "0" === we(e, t) } function me(e) { return Se(e, (function (e) { return this.get_config(e) })) } function ge(e) { return Se(e, (function (e) { return this._get_config(e) })) } function ve(e) { return Se(e, (function (e) { return this._get_config(e) })) } function ye(e, t) { be(t = t || {}).remove(ke(e, t), !!t.crossSubdomainCookie, t.cookieDomain) } function be(e) { return "localStorage" === (e = e || {}).persistenceType ? A.localStorage : A.cookie } function ke(e, t) { return ((t = t || {}).persistencePrefix || "__mp_opt_in_out_") + e } function we(e, t) { return be(t).get(ke(e, t)) } function xe(e, t, i) { A.isString(t) && t.length ? (be(i = i || {}).set(ke(t, i), e ? 1 : 0, A.isNumber(i.cookieExpiration) ? i.cookieExpiration : null, !!i.crossSubdomainCookie, !!i.secureCookie, !!i.crossSiteCookie, i.cookieDomain), i.track && e && i.track(i.trackEventName || "$opt_in", i.trackProperties, { send_immediately: !0 })) : console.error("gdpr." + (e ? "optIn" : "optOut") + " called with an invalid token") } function Se(e, t) { return function () { var i = !1; try { var r = t.call(this, "token"), o = t.call(this, "ignore_dnt"), n = t.call(this, "opt_out_tracking_persistence_type"), s = t.call(this, "opt_out_tracking_cookie_prefix"), a = t.call(this, "window"); r && (i = fe(r, { ignoreDnt: o, persistenceType: n, persistencePrefix: s, window: a })) } catch (e) { console.error("Unexpected error when checking tracking opt-out status: " + e) } if (!i) return e.apply(this, arguments); var c = arguments[arguments.length - 1]; "function" == typeof c && c(0) } } var Pe = { set_action: function (e, t) { var i = {}, r = {}; return A.isObject(e) ? A.each(e, (function (e, t) { this._is_reserved_property(t) || (r[t] = e) }), this) : r[e] = t, i.$set = r, i }, unset_action: function (e) { var t = {}, i = []; return A.isArray(e) || (e = [e]), A.each(e, (function (e) { this._is_reserved_property(e) || i.push(e) }), this), t.$unset = i, t }, set_once_action: function (e, t) { var i = {}, r = {}; return A.isObject(e) ? A.each(e, (function (e, t) { this._is_reserved_property(t) || (r[t] = e) }), this) : r[e] = t, i.$set_once = r, i }, union_action: function (e, t) { var i = {}, r = {}; return A.isObject(e) ? A.each(e, (function (e, t) { this._is_reserved_property(t) || (r[t] = A.isArray(e) ? e : [e]) }), this) : r[e] = A.isArray(t) ? t : [t], i.$union = r, i }, append_action: function (e, t) { var i = {}, r = {}; return A.isObject(e) ? A.each(e, (function (e, t) { this._is_reserved_property(t) || (r[t] = e) }), this) : r[e] = t, i.$append = r, i }, remove_action: function (e, t) { var i = {}, r = {}; return A.isObject(e) ? A.each(e, (function (e, t) { this._is_reserved_property(t) || (r[t] = e) }), this) : r[e] = t, i.$remove = r, i }, delete_action: function () { var e = { $delete: "" }; return e } }, Oe = function () { }; A.extend(Oe.prototype, Pe), Oe.prototype._init = function (e, t, i) { this._mixpanel = e, this._group_key = t, this._group_id = i }, Oe.prototype.set = ve((function (e, t, i) { var r = this.set_action(e, t); return A.isObject(e) && (i = t), this._send_request(r, i) })), Oe.prototype.set_once = ve((function (e, t, i) { var r = this.set_once_action(e, t); return A.isObject(e) && (i = t), this._send_request(r, i) })), Oe.prototype.unset = ve((function (e, t) { var i = this.unset_action(e); return this._send_request(i, t) })), Oe.prototype.union = ve((function (e, t, i) { A.isObject(e) && (i = t); var r = this.union_action(e, t); return this._send_request(r, i) })), Oe.prototype.delete = ve((function (e) { var t = this.delete_action(); return this._send_request(t, e) })), Oe.prototype.remove = ve((function (e, t, i) { var r = this.remove_action(e, t); return this._send_request(r, i) })), Oe.prototype._send_request = function (e, t) { e.$group_key = this._group_key, e.$group_id = this._group_id, e.$token = this._get_config("token"); var i = A.encodeDates(e); return this._mixpanel._track_or_batch({ truncated_data: A.truncate(i, 255), endpoint: this._get_config("api_host") + "/groups/", batcher: this._mixpanel.request_batchers.groups }, t) }, Oe.prototype._is_reserved_property = function (e) { return "$group_key" === e || "$group_id" === e }, Oe.prototype._get_config = function (e) { return this._mixpanel.get_config(e) }, Oe.prototype.toString = function () { return this._mixpanel.toString() + ".group." + this._group_key + "." + this._group_id }, Oe.prototype.remove = Oe.prototype.remove, Oe.prototype.set = Oe.prototype.set, Oe.prototype.set_once = Oe.prototype.set_once, Oe.prototype.union = Oe.prototype.union, Oe.prototype.unset = Oe.prototype.unset, Oe.prototype.toString = Oe.prototype.toString; var Ie = ["__mps", "__mpso", "__mpus", "__mpa", "__mpap", "__mpr", "__mpu", "$people_distinct_id", "__alias", "__cmpns", "__timers"], Ee = function (e) { this.props = {}, this.campaign_params_saved = !1, e.persistence_name ? this.name = "mp_" + e.persistence_name : this.name = "mp_" + e.token + "_mixpanel"; var t = e.persistence; "cookie" !== t && "localStorage" !== t && (q.critical("Unknown persistence type " + t + "; falling back to cookie"), t = e.persistence = "cookie"), "localStorage" === t && A.localStorage.is_supported() ? this.storage = A.localStorage : this.storage = A.cookie, this.load(), this.update_config(e), this.upgrade(e), this.save() }; Ee.prototype.properties = function () { var e = {}; return A.each(this.props, (function (t, i) { A.include(Ie, i) || (e[i] = t) })), e }, Ee.prototype.load = function () { if (!this.disabled) { var e = this.storage.parse(this.name); e && (this.props = A.extend({}, e)) } }, Ee.prototype.upgrade = function (e) { var t, i, r = e.upgrade; r && (t = "mp_super_properties", "string" == typeof r && (t = r), i = this.storage.parse(t), this.storage.remove(t), this.storage.remove(t, !0), i && (this.props = A.extend(this.props, i.all, i.events))), e.cookie_name || "mixpanel" === e.name || (t = "mp_" + e.token + "_" + e.name, (i = this.storage.parse(t)) && (this.storage.remove(t), this.storage.remove(t, !0), this.register_once(i))), this.storage === A.localStorage && (i = A.cookie.parse(this.name), A.cookie.remove(this.name), A.cookie.remove(this.name, !0), i && this.register_once(i)) }, Ee.prototype.save = function () { this.disabled || (this._expire_notification_campaigns(), this.storage.set(this.name, A.JSONEncode(this.props), this.expire_days, this.cross_subdomain, this.secure, this.cross_site, this.cookie_domain)) }, Ee.prototype.remove = function () { this.storage.remove(this.name, !1, this.cookie_domain), this.storage.remove(this.name, !0, this.cookie_domain) }, Ee.prototype.clear = function () { this.remove(), this.props = {} }, Ee.prototype.register_once = function (e, t, i) { return !!A.isObject(e) && (void 0 === t && (t = "None"), this.expire_days = void 0 === i ? this.default_expiry : i, A.each(e, (function (e, i) { this.props.hasOwnProperty(i) && this.props[i] !== t || (this.props[i] = e) }), this), this.save(), !0) }, Ee.prototype.register = function (e, t) { return !!A.isObject(e) && (this.expire_days = void 0 === t ? this.default_expiry : t, A.extend(this.props, e), this.save(), !0) }, Ee.prototype.unregister = function (e) { e in this.props && (delete this.props[e], this.save()) }, Ee.prototype._expire_notification_campaigns = A.safewrap((function () { var e = this.props.__cmpns, t = o.DEBUG ? 6e4 : 36e5; if (e) { for (var i in e) 1 * new Date - e[i] > t && delete e[i]; A.isEmptyObject(e) && delete this.props.__cmpns } })), Ee.prototype.update_campaign_params = function () { this.campaign_params_saved || (this.register_once(A.info.campaignParams()), this.campaign_params_saved = !0) }, Ee.prototype.update_search_keyword = function (e) { this.register(A.info.searchInfo(e)) }, Ee.prototype.update_referrer_info = function (e) { this.register_once({ $initial_referrer: e || "$direct", $initial_referring_domain: A.info.referringDomain(e) || "$direct" }, "") }, Ee.prototype.get_referrer_info = function () { return A.strip_empty_properties({ $initial_referrer: this.props.$initial_referrer, $initial_referring_domain: this.props.$initial_referring_domain }) }, Ee.prototype.safe_merge = function (e) { return A.each(this.props, (function (t, i) { i in e || (e[i] = t) })), e }, Ee.prototype.update_config = function (e) { this.default_expiry = this.expire_days = e.cookie_expiration, this.set_disabled(e.disable_persistence), this.set_cookie_domain(e.cookie_domain), this.set_cross_site(e.cross_site_cookie), this.set_cross_subdomain(e.cross_subdomain_cookie), this.set_secure(e.secure_cookie) }, Ee.prototype.set_disabled = function (e) { this.disabled = e, this.disabled ? this.remove() : this.save() }, Ee.prototype.set_cookie_domain = function (e) { e !== this.cookie_domain && (this.remove(), this.cookie_domain = e, this.save()) }, Ee.prototype.set_cross_site = function (e) { e !== this.cross_site && (this.cross_site = e, this.remove(), this.save()) }, Ee.prototype.set_cross_subdomain = function (e) { e !== this.cross_subdomain && (this.cross_subdomain = e, this.remove(), this.save()) }, Ee.prototype.get_cross_subdomain = function () { return this.cross_subdomain }, Ee.prototype.set_secure = function (e) { e !== this.secure && (this.secure = !!e, this.remove(), this.save()) }, Ee.prototype._add_to_people_queue = function (e, t) { var i = this._get_queue_key(e), r = t[e], o = this._get_or_create_queue("$set"), n = this._get_or_create_queue("$set_once"), s = this._get_or_create_queue("$unset"), a = this._get_or_create_queue("$add"), c = this._get_or_create_queue("$union"), p = this._get_or_create_queue("$remove", []), u = this._get_or_create_queue("$append", []); "__mps" === i ? (A.extend(o, r), this._pop_from_people_queue("$add", r), this._pop_from_people_queue("$union", r), this._pop_from_people_queue("$unset", r)) : "__mpso" === i ? (A.each(r, (function (e, t) { t in n || (n[t] = e) })), this._pop_from_people_queue("$unset", r)) : "__mpus" === i ? A.each(r, (function (e) { A.each([o, n, a, c], (function (t) { e in t && delete t[e] })), A.each(u, (function (t) { e in t && delete t[e] })), s[e] = !0 })) : "__mpa" === i ? (A.each(r, (function (e, t) { t in o ? o[t] += e : (t in a || (a[t] = 0), a[t] += e) }), this), this._pop_from_people_queue("$unset", r)) : "__mpu" === i ? (A.each(r, (function (e, t) { A.isArray(e) && (t in c || (c[t] = []), c[t] = c[t].concat(e)) })), this._pop_from_people_queue("$unset", r)) : "__mpr" === i ? (p.push(r), this._pop_from_people_queue("$append", r)) : "__mpap" === i && (u.push(r), this._pop_from_people_queue("$unset", r)), q.log("MIXPANEL PEOPLE REQUEST (QUEUED, PENDING IDENTIFY):"), q.log(t), this.save() }, Ee.prototype._pop_from_people_queue = function (e, t) { var i = this._get_queue(e); A.isUndefined(i) || (A.each(t, (function (t, r) { "$append" === e || "$remove" === e ? A.each(i, (function (e) { e[r] === t && delete e[r] })) : delete i[r] }), this), this.save()) }, Ee.prototype._get_queue_key = function (e) { return "$set" === e ? "__mps" : "$set_once" === e ? "__mpso" : "$unset" === e ? "__mpus" : "$add" === e ? "__mpa" : "$append" === e ? "__mpap" : "$remove" === e ? "__mpr" : "$union" === e ? "__mpu" : void q.error("Invalid queue:", e) }, Ee.prototype._get_queue = function (e) { return this.props[this._get_queue_key(e)] }, Ee.prototype._get_or_create_queue = function (e, t) { var i = this._get_queue_key(e); return t = A.isUndefined(t) ? {} : t, this.props[i] || (this.props[i] = t) }, Ee.prototype.set_event_timer = function (e, t) { var i = this.props.__timers || {}; i[e] = t, this.props.__timers = i, this.save() }, Ee.prototype.remove_event_timer = function (e) { var t = (this.props.__timers || {})[e]; return A.isUndefined(t) || (delete this.props.__timers[e], this.save()), t }; var Te = "in", Fe = "not in", He = "-", Me = "*", je = "/", Ne = "%", Ae = "==", qe = "!=", Ue = ">", De = "<", $e = ">=", Be = "<=", Ce = "defined", Re = "not defined"; function Ve(e) { if (null === e) return null; switch (typeof e) { case "object": return A.isDate(e) && e.getTime() >= 0 ? e.getTime() : null; case "boolean": return Number(e); case "number": return e; case "string": return e = Number(e), isNaN(e) ? 0 : e }return null } function Le(e) { if (null === e) return !1; switch (typeof e) { case "boolean": return e; case "number": return 0 !== e; case "string": return e.length > 0; case "object": return !!(A.isArray(e) && e.length > 0) || (!!(A.isDate(e) && e.getTime() > 0) || !(!A.isObject(e) || A.isEmptyObject(e))) }return !1 } function Je(e, t) { if (!e.operator || -1 === [Ae, qe].indexOf(e.operator) || !e.children || 2 !== e.children.length) throw "Invalid equality operator " + e; var i = function (e, t) { if (null === e && e === t) return !0; if (typeof e == typeof t) switch (typeof e) { case "number": case "string": case "boolean": return e === t; case "object": if (A.isArray(e) && A.isArray(t)) return function (e, t) { if (e === t) return !0; if (null === e || null === t) return !1; if (e.length !== t.length) return !1; for (var i = 0; i < e.length; i++)if (e[i] !== t[i]) return !1; return !0 }(e, t); if (A.isDate(e) && A.isDate(t)) return e.getTime() === t.getTime(); if (A.isObject(e) && A.isObject(t)) return JSON.stringify(e) === JSON.stringify(t) }return !1 }(We(e.children[0], t), We(e.children[1], t)); switch (e.operator) { case Ae: return i; case qe: return !i } } function ze(e, t) { if (!e.operator) throw "Invalid operator: operator key missing " + e; switch (e.operator) { case "and": return function (e, t) { if (!e.operator || "and" !== e.operator || !e.children || 2 !== e.children.length) throw "Invalid operator: AND " + e; return Le(We(e.children[0], t)) && Le(We(e.children[1], t)) }(e, t); case "or": return function (e, t) { if (!e.operator || "or" !== e.operator || !e.children || 2 !== e.children.length) throw "Invalid operator: OR " + e; return Le(We(e.children[0], t)) || Le(We(e.children[1], t)) }(e, t); case Te: case Fe: return function (e, t) { if (!e.operator || -1 === [Te, Fe].indexOf(e.operator) || !e.children || 2 !== e.children.length) throw "Invalid operator: IN/NOT IN " + e; var i = We(e.children[0], t), r = We(e.children[1], t); if (!A.isArray(r) && !A.isString(r)) throw "Invalid operand for operator IN: invalid type" + r; var o = r.indexOf(i) > -1; return e.operator === Fe ? !o : o }(e, t); case "+": return function (e, t) { if (!e.operator || "+" !== e.operator || !e.children || e.children.length < 2) throw "Invalid operator: PLUS " + e; var i = We(e.children[0], t), r = We(e.children[1], t); return "number" == typeof i && "number" == typeof r || "string" == typeof i && "string" == typeof r ? i + r : null }(e, t); case He: case Me: case je: case Ne: return function (e, t) { if (!e.operator || -1 === [He, Me, je, Ne].indexOf(e.operator) || !e.children || e.children.length < 2) throw "Invalid arithmetic operator " + e; var i = We(e.children[0], t), r = We(e.children[1], t); if ("number" == typeof i && "number" == typeof r) switch (e.operator) { case He: return i - r; case Me: return i * r; case je: return 0 !== r ? i / r : null; case Ne: return 0 === r ? null : 0 === i ? 0 : i < 0 && r > 0 || i > 0 && r < 0 ? -(Math.floor(i / r) * r - i) : i % r; default: throw "Unknown operator: " + e.operator }return null }(e, t); case Ae: case qe: return Je(e, t); case Ue: case De: case $e: case Be: return function (e, t) { if (!e.operator || -1 === [Ue, $e, De, Be].indexOf(e.operator) || !e.children || 2 !== e.children.length) throw "Invalid comparison operator " + e; var i = We(e.children[0], t), r = We(e.children[1], t); if (typeof i == typeof r) if ("number" == typeof r || A.isDate(r)) switch (i = Ve(i), r = Ve(r), e.operator) { case Ue: return i > r; case $e: return i >= r; case De: return i < r; case Be: return i <= r } else if ("string" == typeof r) { var o = i.localeCompare(r); switch (e.operator) { case Ue: return o > 0; case $e: return o >= 0; case De: return o < 0; case Be: return o <= 0 } } return null }(e, t); case "boolean": return function (e, t) { if (!e.operator || "boolean" !== e.operator || !e.children || 1 !== e.children.length) throw "Invalid cast operator: boolean " + e; return Le(We(e.children[0], t)) }(e, t); case "datetime": return function (e, t) { if (!e.operator || "datetime" !== e.operator || !e.children || 1 !== e.children.length) throw "Invalid cast operator: datetime " + e; var i = We(e.children[0], t); if (null === i) return null; switch (typeof i) { case "number": case "string": var r = new Date(i); return isNaN(r.getTime()) ? null : r; case "object": if (A.isDate(i)) return i }return null }(e, t); case "list": return function (e, t) { if (!e.operator || "list" !== e.operator || !e.children || 1 !== e.children.length) throw "Invalid cast operator: list " + e; var i = We(e.children[0], t); return null === i ? null : A.isArray(i) ? i : null }(e, t); case "number": return function (e, t) { if (!e.operator || "number" !== e.operator || !e.children || 1 !== e.children.length) throw "Invalid cast operator: number " + e; return Ve(We(e.children[0], t)) }(e, t); case "string": return function (e, t) { if (!e.operator || "string" !== e.operator || !e.children || 1 !== e.children.length) throw "Invalid cast operator: string " + e; var i = We(e.children[0], t); switch (typeof i) { case "object": return A.isDate(i) ? i.toJSON() : JSON.stringify(i) }return String(i) }(e, t); case Ce: case Re: return function (e, t) { if (!e.operator || -1 === [Ce, Re].indexOf(e.operator) || !e.children || 1 !== e.children.length) throw "Invalid defined/not defined operator: " + e; var i = null !== We(e.children[0], t); return e.operator === Re ? !i : i }(e, t); case "not": return function (e, t) { if (!e.operator || "not" !== e.operator || !e.children || 1 !== e.children.length) throw "Invalid not operator: " + e; var i = We(e.children[0], t); return null === i || ("boolean" == typeof i ? !i : null) }(e, t) } } function Ge(e, t) { if (!e.property || !e.value) throw "Invalid operand: missing required keys " + e; switch (e.property) { case "event": return void 0 !== t[e.value] ? t[e.value] : null; case "literal": return "now" === e.value ? new Date : "object" == typeof e.value ? function (e) { var t = e.window; if (!t || !t.unit || !t.value) throw "Invalid window: missing required keys " + JSON.stringify(e); var i = new Date; switch (t.unit) { case "hour": i.setTime(i.getTime() + -1 * t.value * 60 * 60 * 1e3); break; case "day": i.setTime(i.getTime() + -1 * t.value * 24 * 60 * 60 * 1e3); break; case "week": i.setTime(i.getTime() + -1 * t.value * 7 * 24 * 60 * 60 * 1e3); break; case "month": i.setTime(i.getTime() + -1 * t.value * 30 * 24 * 60 * 60 * 1e3); break; default: throw "Invalid unit: " + t.unit }return i }(e.value) : e.value; default: throw "Invalid operand: Invalid property type " + e.property } } function We(e, t) { return e.property ? Ge(e, t) : e.operator ? ze(e, t) : void 0 } var Xe = function (e, t) { A.bind_instance_methods(this), this.mixpanel = t, this.persistence = this.mixpanel.persistence, this.resource_protocol = this.mixpanel.get_config("inapp_protocol"), this.cdn_host = this.mixpanel.get_config("cdn"), this.campaign_id = A.escapeHTML(e.id), this.message_id = A.escapeHTML(e.message_id), this.body = (A.escapeHTML(e.body) || "").replace(/\n/g, "<br/>"), this.cta = A.escapeHTML(e.cta) || "Close", this.notif_type = A.escapeHTML(e.type) || "takeover", this.style = A.escapeHTML(e.style) || "light", this.title = A.escapeHTML(e.title) || "", this.video_width = Xe.VIDEO_WIDTH, this.video_height = Xe.VIDEO_HEIGHT, this.display_triggers = e.display_triggers || [], this.dest_url = e.cta_url || null, this.image_url = e.image_url || null, this.thumb_image_url = e.thumb_image_url || null, this.video_url = e.video_url || null, this.thumb_image_url && 0 === this.thumb_image_url.indexOf("//") && (this.thumb_image_url = this.thumb_image_url.replace("//", this.resource_protocol)), this.clickthrough = !0, this.dest_url || (this.dest_url = "#dismiss", this.clickthrough = !1), this.mini = "mini" === this.notif_type, this.mini || (this.notif_type = "takeover"), this.notif_width = this.mini ? Xe.NOTIF_WIDTH_MINI : Xe.NOTIF_WIDTH, this._set_client_config(), this.imgs_to_preload = this._init_image_html(), this._init_video() }; Xe.ANIM_TIME = 200, Xe.MARKUP_PREFIX = "mixpanel-notification", Xe.BG_OPACITY = .6, Xe.NOTIF_TOP = 25, Xe.NOTIF_START_TOP = 200, Xe.NOTIF_WIDTH = 388, Xe.NOTIF_WIDTH_MINI = 420, Xe.NOTIF_HEIGHT_MINI = 85, Xe.THUMB_BORDER_SIZE = 5, Xe.THUMB_IMG_SIZE = 60, Xe.THUMB_OFFSET = Math.round(Xe.THUMB_IMG_SIZE / 2), Xe.VIDEO_WIDTH = 595, Xe.VIDEO_HEIGHT = 334, Xe.prototype.show = function () { var e = this; this._set_client_config(), this.body_el ? (this._init_styles(), this._init_notification_el(), this._preload_images(this._attach_and_animate)) : setTimeout((function () { e.show() }), 300) }, Xe.prototype.dismiss = A.safewrap((function () { this.marked_as_shown || this._mark_delivery({ invisible: !0 }); var e, t, i, r = this.showing_video ? this._get_el("video") : this._get_notification_display_el(); this.use_transitions ? (this._remove_class("bg", "visible"), this._add_class(r, "exiting"), setTimeout(this._remove_notification_el, Xe.ANIM_TIME)) : (this.mini ? (e = "right", t = 20, i = -100) : (e = "top", t = Xe.NOTIF_TOP, i = Xe.NOTIF_START_TOP + Xe.NOTIF_TOP), this._animate_els([{ el: this._get_el("bg"), attr: "opacity", start: Xe.BG_OPACITY, goal: 0 }, { el: r, attr: "opacity", start: 1, goal: 0 }, { el: r, attr: e, start: t, goal: i }], Xe.ANIM_TIME, this._remove_notification_el)) })), Xe.prototype._add_class = A.safewrap((function (e, t) { t = Xe.MARKUP_PREFIX + "-" + t, "string" == typeof e && (e = this._get_el(e)), e.className ? ~(" " + e.className + " ").indexOf(" " + t + " ") || (e.className += " " + t) : e.className = t })), Xe.prototype._remove_class = A.safewrap((function (e, t) { t = Xe.MARKUP_PREFIX + "-" + t, "string" == typeof e && (e = this._get_el(e)), e.className && (e.className = (" " + e.className + " ").replace(" " + t + " ", "").replace(/^[\s\xA0]+/, "").replace(/[\s\xA0]+$/, "")) })), Xe.prototype._animate_els = A.safewrap((function (e, t, i, r) { var o, n, s, a = this, c = !1, p = 1 * new Date; for (s = p - (r = r || p), o = 0; o < e.length; o++)if (void 0 === (n = e[o]).val && (n.val = n.start), n.val !== n.goal) { c = !0; var u = n.goal - n.start, _ = n.goal >= n.start ? 1 : -1; n.val = n.start + u * s / t, "opacity" !== n.attr && (n.val = Math.round(n.val)), (_ > 0 && n.val >= n.goal || _ < 0 && n.val <= n.goal) && (n.val = n.goal) } if (c) { for (o = 0; o < e.length; o++)if ((n = e[o]).el) { var l = "opacity" === n.attr ? "" : "px"; n.el.style[n.attr] = String(n.val) + l } setTimeout((function () { a._animate_els(e, t, i, r) }), 10) } else i && i() })), Xe.prototype._attach_and_animate = A.safewrap((function () { var e = this; if (!this.shown && !this._get_shown_campaigns()[this.campaign_id]) { this.shown = !0, this.body_el.appendChild(this.notification_el), setTimeout((function () { var t, i, r, o = e._get_notification_display_el(); e.use_transitions ? (e.mini || e._add_class("bg", "visible"), e._add_class(o, "visible"), e._mark_as_shown()) : (e.mini ? (t = "right", i = -100, r = 20) : (t = "top", i = Xe.NOTIF_START_TOP + Xe.NOTIF_TOP, r = Xe.NOTIF_TOP), e._animate_els([{ el: e._get_el("bg"), attr: "opacity", start: 0, goal: Xe.BG_OPACITY }, { el: o, attr: "opacity", start: 0, goal: 1 }, { el: o, attr: t, start: i, goal: r }], Xe.ANIM_TIME, e._mark_as_shown)) }), 100), A.register_event(e._get_el("cancel"), "click", (function (t) { t.preventDefault(), e.dismiss() })); var t = e._get_el("button") || e._get_el("mini-content"); A.register_event(t, "click", (function (t) { if (t.preventDefault(), e.show_video) e._track_event("$campaign_open", { $resource_type: "video" }), e._switch_to_video(); else if (e.dismiss(), e.clickthrough) { var i = null; e.mixpanel.get_config("inapp_link_new_window") ? window.open(e.dest_url) : i = function () { window.location.href = e.dest_url }, e._track_event("$campaign_open", { $resource_type: "link" }, i) } })) } })), Xe.prototype._get_el = function (e) { return document.getElementById(Xe.MARKUP_PREFIX + "-" + e) }, Xe.prototype._get_notification_display_el = function () { return this._get_el(this.notif_type) }, Xe.prototype._get_shown_campaigns = function () { return this.persistence.props.__cmpns || (this.persistence.props.__cmpns = {}) }, Xe.prototype._matches_event_data = A.safewrap((function (e) { for (var t = e.event || "", i = 0; i < this.display_triggers.length; i++) { var r = this.display_triggers[i]; if ("$any_event" === (r.event || "") || t === r.event) { if (!r.selector || A.isEmptyObject(r.selector)) return !0; if (We(r.selector, e.properties)) return !0 } } return !1 })), Xe.prototype._browser_lte = function (e, t) { return this.browser_versions[e] && this.browser_versions[e] <= t }, Xe.prototype._init_image_html = function () { var e = []; return this.mini ? (this.thumb_image_url = this.thumb_image_url || this.cdn_host + "/site_media/images/icons/notifications/mini-news-dark.png", e.push(this.thumb_image_url)) : (this.image_url ? (e.push(this.image_url), this.img_html = '<img id="img" src="' + this.image_url + '"/>') : this.img_html = "", this.thumb_image_url ? (e.push(this.thumb_image_url), this.thumb_img_html = '<div id="thumbborder-wrapper"><div id="thumbborder"></div></div><img id="thumbnail" src="' + this.thumb_image_url + '" width="' + Xe.THUMB_IMG_SIZE + '" height="' + Xe.THUMB_IMG_SIZE + '"/><div id="thumbspacer"></div>') : this.thumb_img_html = ""), e }, Xe.prototype._init_notification_el = function () { var e = "", t = "", i = "", r = '<div id="cancel"><div id="cancel-icon"></div></div>'; if (this.notification_el = document.createElement("div"), this.notification_el.id = Xe.MARKUP_PREFIX + "-wrapper", this.mini) e = '<div id="mini"><div id="mainbox">' + r + '<div id="mini-content"><div id="mini-icon"><div id="mini-icon-img"></div></div><div id="body"><div id="body-text"><div>' + this.body + '</div></div></div></div></div><div id="mini-border"></div></div>'; else { var o = this.clickthrough || this.show_video ? "" : '<div id="button-close"></div>', n = this.show_video ? '<div id="button-play"></div>' : ""; this._browser_lte("ie", 7) && (o = "", n = ""), e = '<div id="takeover">' + this.thumb_img_html + '<div id="mainbox">' + r + '<div id="content">' + this.img_html + '<div id="title">' + this.title + '</div><div id="body">' + this.body + '</div><div id="tagline"><a href="http://mixpanel.com?from=inapp" target="_blank">POWERED BY MIXPANEL</a></div></div><div id="button">' + o + '<a id="button-link" href="' + this.dest_url + '">' + this.cta + "</a>" + n + "</div></div></div>" } this.youtube_video ? (t = this.resource_protocol + "www.youtube.com/embed/" + this.youtube_video + "?wmode=transparent&showinfo=0&modestbranding=0&rel=0&autoplay=1&loop=0&vq=hd1080", this.yt_custom && (t += "&enablejsapi=1&html5=1&controls=0", i = '<div id="video-controls"><div id="video-progress" class="video-progress-el"><div id="video-progress-total" class="video-progress-el"></div><div id="video-elapsed" class="video-progress-el"></div></div><div id="video-time" class="video-progress-el"></div></div>')) : this.vimeo_video && (t = this.resource_protocol + "player.vimeo.com/video/" + this.vimeo_video + "?autoplay=1&title=0&byline=0&portrait=0"), this.show_video && (this.video_iframe = '<iframe id="' + Xe.MARKUP_PREFIX + '-video-frame" width="' + this.video_width + '" height="' + this.video_height + '"  src="' + t + '" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen="1" scrolling="no"></iframe>', i = '<div id="video-' + (this.flip_animate ? "" : "no") + 'flip"><div id="video"><div id="video-holder"></div>' + i + "</div></div>"); var s = i + e; this.flip_animate && (s = (this.mini ? e : "") + '<div id="flipcontainer"><div id="flipper">' + (this.mini ? i : s) + "</div></div>"), this.notification_el.innerHTML = ('<div id="overlay" class="' + this.notif_type + '"><div id="campaignid-' + this.campaign_id + '"><div id="bgwrapper"><div id="bg"></div>' + s + "</div></div></div>").replace(/class="/g, 'class="' + Xe.MARKUP_PREFIX + "-").replace(/id="/g, 'id="' + Xe.MARKUP_PREFIX + "-") }, Xe.prototype._init_styles = function () { "dark" === this.style ? this.style_vals = { bg: "#1d1f25", bg_actions: "#282b32", bg_hover: "#3a4147", bg_light: "#4a5157", border_gray: "#32353c", cancel_opacity: "0.4", mini_hover: "#2a3137", text_title: "#fff", text_main: "#9498a3", text_tagline: "#464851", text_hover: "#ddd" } : this.style_vals = { bg: "#fff", bg_actions: "#e7eaee", bg_hover: "#eceff3", bg_light: "#f5f5f5", border_gray: "#e4ecf2", cancel_opacity: "1.0", mini_hover: "#fafafa", text_title: "#5c6578", text_main: "#8b949b", text_tagline: "#ced9e6", text_hover: "#7c8598" }; var e = "0px 0px 35px 0px rgba(45, 49, 56, 0.7)", t = e, i = e, r = Xe.THUMB_IMG_SIZE + 2 * Xe.THUMB_BORDER_SIZE, o = Xe.ANIM_TIME / 1e3 + "s"; this.mini && (e = "none"); var n = {}; n["@media only screen and (max-width: " + (Xe.NOTIF_WIDTH_MINI + 20 - 1) + "px)"] = { "#overlay": { display: "none" } }; var s = { ".flipped": { transform: "rotateY(180deg)" }, "#overlay": { position: "fixed", top: "0", left: "0", width: "100%", height: "100%", overflow: "auto", "text-align": "center", "z-index": "10000", "font-family": '"Helvetica", "Arial", sans-serif', "-webkit-font-smoothing": "antialiased", "-moz-osx-font-smoothing": "grayscale" }, "#overlay.mini": { height: "0", overflow: "visible" }, "#overlay a": { width: "initial", padding: "0", "text-decoration": "none", "text-transform": "none", color: "inherit" }, "#bgwrapper": { position: "relative", width: "100%", height: "100%" }, "#bg": { position: "fixed", top: "0", left: "0", width: "100%", height: "100%", "min-width": 4 * this.doc_width + "px", "min-height": 4 * this.doc_height + "px", "background-color": "black", opacity: "0.0", "-ms-filter": "progid:DXImageTransform.Microsoft.Alpha(Opacity=60)", filter: "alpha(opacity=60)", transition: "opacity " + o }, "#bg.visible": { opacity: Xe.BG_OPACITY }, ".mini #bg": { width: "0", height: "0", "min-width": "0" }, "#flipcontainer": { perspective: "1000px", position: "absolute", width: "100%" }, "#flipper": { position: "relative", "transform-style": "preserve-3d", transition: "0.3s" }, "#takeover": { position: "absolute", left: "50%", width: Xe.NOTIF_WIDTH + "px", "margin-left": Math.round(-Xe.NOTIF_WIDTH / 2) + "px", "backface-visibility": "hidden", transform: "rotateY(0deg)", opacity: "0.0", top: Xe.NOTIF_START_TOP + "px", transition: "opacity " + o + ", top " + o }, "#takeover.visible": { opacity: "1.0", top: Xe.NOTIF_TOP + "px" }, "#takeover.exiting": { opacity: "0.0", top: Xe.NOTIF_START_TOP + "px" }, "#thumbspacer": { height: Xe.THUMB_OFFSET + "px" }, "#thumbborder-wrapper": { position: "absolute", top: -Xe.THUMB_BORDER_SIZE + "px", left: Xe.NOTIF_WIDTH / 2 - Xe.THUMB_OFFSET - Xe.THUMB_BORDER_SIZE + "px", width: r + "px", height: r / 2 + "px", overflow: "hidden" }, "#thumbborder": { position: "absolute", width: r + "px", height: r + "px", "border-radius": r + "px", "background-color": this.style_vals.bg_actions, opacity: "0.5" }, "#thumbnail": { position: "absolute", top: "0px", left: Xe.NOTIF_WIDTH / 2 - Xe.THUMB_OFFSET + "px", width: Xe.THUMB_IMG_SIZE + "px", height: Xe.THUMB_IMG_SIZE + "px", overflow: "hidden", "z-index": "100", "border-radius": Xe.THUMB_IMG_SIZE + "px" }, "#mini": { position: "absolute", right: "20px", top: Xe.NOTIF_TOP + "px", width: this.notif_width + "px", height: 2 * Xe.NOTIF_HEIGHT_MINI + "px", "margin-top": 20 - Xe.NOTIF_HEIGHT_MINI + "px", "backface-visibility": "hidden", opacity: "0.0", transform: "rotateX(90deg)", transition: "opacity 0.3s, transform 0.3s, right 0.3s" }, "#mini.visible": { opacity: "1.0", transform: "rotateX(0deg)" }, "#mini.exiting": { opacity: "0.0", right: "-150px" }, "#mainbox": { "border-radius": "4px", "box-shadow": e, "text-align": "center", "background-color": this.style_vals.bg, "font-size": "14px", color: this.style_vals.text_main }, "#mini #mainbox": { height: Xe.NOTIF_HEIGHT_MINI + "px", "margin-top": Xe.NOTIF_HEIGHT_MINI + "px", "border-radius": "3px", transition: "background-color " + o }, "#mini-border": { height: Xe.NOTIF_HEIGHT_MINI + 6 + "px", width: Xe.NOTIF_WIDTH_MINI + 6 + "px", position: "absolute", top: "-3px", left: "-3px", "margin-top": Xe.NOTIF_HEIGHT_MINI + "px", "border-radius": "6px", opacity: "0.25", "background-color": "#fff", "z-index": "-1", "box-shadow": i }, "#mini-icon": { position: "relative", display: "inline-block", width: "75px", height: Xe.NOTIF_HEIGHT_MINI + "px", "border-radius": "3px 0 0 3px", "background-color": this.style_vals.bg_actions, background: "linear-gradient(135deg, " + this.style_vals.bg_light + " 0%, " + this.style_vals.bg_actions + " 100%)", transition: "background-color " + o }, "#mini:hover #mini-icon": { "background-color": this.style_vals.mini_hover }, "#mini:hover #mainbox": { "background-color": this.style_vals.mini_hover }, "#mini-icon-img": { position: "absolute", "background-image": "url(" + this.thumb_image_url + ")", width: "48px", height: "48px", top: "20px", left: "12px" }, "#content": { padding: "30px 20px 0px 20px" }, "#mini-content": { "text-align": "left", height: Xe.NOTIF_HEIGHT_MINI + "px", cursor: "pointer" }, "#img": { width: "328px", "margin-top": "30px", "border-radius": "5px" }, "#title": { "max-height": "600px", overflow: "hidden", "word-wrap": "break-word", padding: "25px 0px 20px 0px", "font-size": "19px", "font-weight": "bold", color: this.style_vals.text_title }, "#body": { "max-height": "600px", "margin-bottom": "25px", overflow: "hidden", "word-wrap": "break-word", "line-height": "21px", "font-size": "15px", "font-weight": "normal", "text-align": "left" }, "#mini #body": { display: "inline-block", "max-width": "250px", margin: "0 0 0 30px", height: Xe.NOTIF_HEIGHT_MINI + "px", "font-size": "16px", "letter-spacing": "0.8px", color: this.style_vals.text_title }, "#mini #body-text": { display: "table", height: Xe.NOTIF_HEIGHT_MINI + "px" }, "#mini #body-text div": { display: "table-cell", "vertical-align": "middle" }, "#tagline": { "margin-bottom": "15px", "font-size": "10px", "font-weight": "600", "letter-spacing": "0.8px", color: "#ccd7e0", "text-align": "left" }, "#tagline a": { color: this.style_vals.text_tagline, transition: "color " + o }, "#tagline a:hover": { color: this.style_vals.text_hover }, "#cancel": { position: "absolute", right: "0", width: "8px", height: "8px", padding: "10px", "border-radius": "20px", margin: "12px 12px 0 0", "box-sizing": "content-box", cursor: "pointer", transition: "background-color " + o }, "#mini #cancel": { margin: "7px 7px 0 0" }, "#cancel-icon": { width: "8px", height: "8px", overflow: "hidden", "background-image": "url(" + this.cdn_host + "/site_media/images/icons/notifications/cancel-x.png)", opacity: this.style_vals.cancel_opacity }, "#cancel:hover": { "background-color": this.style_vals.bg_hover }, "#button": { display: "block", height: "60px", "line-height": "60px", "text-align": "center", "background-color": this.style_vals.bg_actions, "border-radius": "0 0 4px 4px", overflow: "hidden", cursor: "pointer", transition: "background-color " + o }, "#button-close": { display: "inline-block", width: "9px", height: "60px", "margin-right": "8px", "vertical-align": "top", "background-image": "url(" + this.cdn_host + "/site_media/images/icons/notifications/close-x-" + this.style + ".png)", "background-repeat": "no-repeat", "background-position": "0px 25px" }, "#button-play": { display: "inline-block", width: "30px", height: "60px", "margin-left": "15px", "background-image": "url(" + this.cdn_host + "/site_media/images/icons/notifications/play-" + this.style + "-small.png)", "background-repeat": "no-repeat", "background-position": "0px 15px" }, "a#button-link": { display: "inline-block", "vertical-align": "top", "text-align": "center", "font-size": "17px", "font-weight": "bold", overflow: "hidden", "word-wrap": "break-word", color: this.style_vals.text_title, transition: "color " + o }, "#button:hover": { "background-color": this.style_vals.bg_hover, color: this.style_vals.text_hover }, "#button:hover a": { color: this.style_vals.text_hover }, "#video-noflip": { position: "relative", top: 2 * -this.video_height + "px" }, "#video-flip": { "backface-visibility": "hidden", transform: "rotateY(180deg)" }, "#video": { position: "absolute", width: this.video_width - 1 + "px", height: this.video_height + "px", top: Xe.NOTIF_TOP + "px", "margin-top": "100px", left: "50%", "margin-left": Math.round(-this.video_width / 2) + "px", overflow: "hidden", "border-radius": "5px", "box-shadow": t, transform: "translateZ(1px)", transition: "opacity " + o + ", top " + o }, "#video.exiting": { opacity: "0.0", top: this.video_height + "px" }, "#video-holder": { position: "absolute", width: this.video_width - 1 + "px", height: this.video_height + "px", overflow: "hidden", "border-radius": "5px" }, "#video-frame": { "margin-left": "-1px", width: this.video_width + "px" }, "#video-controls": { opacity: "0", transition: "opacity 0.5s" }, "#video:hover #video-controls": { opacity: "1.0" }, "#video .video-progress-el": { position: "absolute", bottom: "0", height: "25px", "border-radius": "0 0 0 5px" }, "#video-progress": { width: "90%" }, "#video-progress-total": { width: "100%", "background-color": this.style_vals.bg, opacity: "0.7" }, "#video-elapsed": { width: "0", "background-color": "#6cb6f5", opacity: "0.9" }, "#video #video-time": { width: "10%", right: "0", "font-size": "11px", "line-height": "25px", color: this.style_vals.text_main, "background-color": "#666", "border-radius": "0 0 5px 0" } }; this._browser_lte("ie", 8) && A.extend(s, { "* html #overlay": { position: "absolute" }, "* html #bg": { position: "absolute" }, "html, body": { height: "100%" } }), this._browser_lte("ie", 7) && A.extend(s, { "#mini #body": { display: "inline", zoom: "1", border: "1px solid " + this.style_vals.bg_hover }, "#mini #body-text": { padding: "20px" }, "#mini #mini-icon": { display: "none" } }); var a = ["backface-visibility", "border-radius", "box-shadow", "opacity", "perspective", "transform", "transform-style", "transition"], c = ["khtml", "moz", "ms", "o", "webkit"]; for (var p in s) for (var u = 0; u < a.length; u++) { var _ = a[u]; if (_ in s[p]) for (var l = s[p][_], d = 0; d < c.length; d++)s[p]["-" + c[d] + "-" + _] = l } var h, f, m, g, v; h = n, m = (f = function (e) { var t = ""; for (var i in e) { t += "\n" + i.replace(/#/g, "#" + Xe.MARKUP_PREFIX + "-").replace(/\./g, "." + Xe.MARKUP_PREFIX + "-") + " {"; var r = e[i]; for (var o in r) t += o + ":" + r[o] + ";"; t += "}" } return t })(s) + function (e) { var t = ""; for (var i in e) t += "\n" + i + " {" + f(e[i]) + "\n}"; return t }(h), g = document.head || document.getElementsByTagName("head")[0] || document.documentElement, v = document.createElement("style"), g.appendChild(v), v.setAttribute("type", "text/css"), v.styleSheet ? v.styleSheet.cssText = m : v.textContent = m }, Xe.prototype._init_video = A.safewrap((function () { if (this.video_url) { var e = this; e.yt_custom = "postMessage" in window, e.dest_url = e.video_url; var t = e.video_url.match(/(?:youtube(?:-nocookie)?\.com\/(?:[^/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?/ ]{11})/i), i = e.video_url.match(/vimeo\.com\/.*?(\d+)/i); if (t) { if (e.show_video = !0, e.youtube_video = t[1], e.yt_custom) { window.onYouTubeIframeAPIReady = function () { e._get_el("video-frame") && e._yt_video_ready() }; var r = document.createElement("script"); r.src = e.resource_protocol + "www.youtube.com/iframe_api"; var o = document.getElementsByTagName("script")[0]; o.parentNode.insertBefore(r, o) } } else i && (e.show_video = !0, e.vimeo_video = i[1]); (e._browser_lte("ie", 7) || e._browser_lte("firefox", 3)) && (e.show_video = !1, e.clickthrough = !0) } })), Xe.prototype._mark_as_shown = A.safewrap((function () { var e = this; A.register_event(e._get_el("bg"), "click", (function () { e.dismiss() })); var t = function (e, t) { var i = {}; return document.defaultView && document.defaultView.getComputedStyle ? i = document.defaultView.getComputedStyle(e, null) : e.currentStyle && (i = e.currentStyle), i[t] }; if (this.campaign_id) { var i = this._get_el("overlay"); i && "hidden" !== t(i, "visibility") && "none" !== t(i, "display") && this._mark_delivery() } })), Xe.prototype._mark_delivery = A.safewrap((function (e) { this.marked_as_shown || (this.marked_as_shown = !0, this.campaign_id && (this._get_shown_campaigns()[this.campaign_id] = 1 * new Date, this.persistence.save()), this._track_event("$campaign_delivery", e), this.mixpanel.people.append({ $campaigns: this.campaign_id, $notifications: { campaign_id: this.campaign_id, message_id: this.message_id, type: "web", time: new Date } })) })), Xe.prototype._preload_images = function (e) { var t = this; if (0 !== this.imgs_to_preload.length) { for (var i = 0, r = [], o = function () { ++i === t.imgs_to_preload.length && e && (e(), e = null) }, n = 0; n < this.imgs_to_preload.length; n++) { var s = new Image; s.onload = o, s.src = this.imgs_to_preload[n], s.complete && o(), r.push(s) } this._browser_lte("ie", 7) && setTimeout((function () { var t = !0; for (n = 0; n < r.length; n++)r[n].complete || (t = !1); t && e && (e(), e = null) }), 500) } else e() }, Xe.prototype._remove_notification_el = A.safewrap((function () { window.clearInterval(this._video_progress_checker), this.notification_el.style.visibility = "hidden", this.body_el.removeChild(this.notification_el) })), Xe.prototype._set_client_config = function () { var e = function (e) { var t = navigator.userAgent.match(e); return t && t[1] }; this.browser_versions = {}, this.browser_versions.chrome = e(/Chrome\/(\d+)/), this.browser_versions.firefox = e(/Firefox\/(\d+)/), this.browser_versions.ie = e(/MSIE (\d+).+/), this.browser_versions.ie || window.ActiveXObject || !("ActiveXObject" in window) || (this.browser_versions.ie = 11), this.body_el = document.body || document.getElementsByTagName("body")[0], this.body_el && (this.doc_width = Math.max(this.body_el.scrollWidth, document.documentElement.scrollWidth, this.body_el.offsetWidth, document.documentElement.offsetWidth, this.body_el.clientWidth, document.documentElement.clientWidth), this.doc_height = Math.max(this.body_el.scrollHeight, document.documentElement.scrollHeight, this.body_el.offsetHeight, document.documentElement.offsetHeight, this.body_el.clientHeight, document.documentElement.clientHeight)); var t = this.browser_versions.ie, i = document.createElement("div").style, r = function (e) { if (e in i) return !0; if (!t) for (var r = ["O" + (e = e[0].toUpperCase() + e.slice(1)), "Webkit" + e, "Moz" + e], o = 0; o < r.length; o++)if (r[o] in i) return !0; return !1 }; this.use_transitions = this.body_el && r("transition") && r("transform"), this.flip_animate = (this.browser_versions.chrome >= 33 || this.browser_versions.firefox >= 15) && this.body_el && r("backfaceVisibility") && r("perspective") && r("transform") }, Xe.prototype._switch_to_video = A.safewrap((function () { var e = this, t = [{ el: e._get_notification_display_el(), attr: "opacity", start: 1, goal: 0 }, { el: e._get_notification_display_el(), attr: "top", start: Xe.NOTIF_TOP, goal: -500 }, { el: e._get_el("video-noflip"), attr: "opacity", start: 0, goal: 1 }, { el: e._get_el("video-noflip"), attr: "top", start: 2 * -e.video_height, goal: 0 }]; if (e.mini) { var i = e._get_el("bg"), r = e._get_el("overlay"); i.style.width = "100%", i.style.height = "100%", r.style.width = "100%", e._add_class(e._get_notification_display_el(), "exiting"), e._add_class(i, "visible"), t.push({ el: e._get_el("bg"), attr: "opacity", start: 0, goal: Xe.BG_OPACITY }) } e._get_el("video-holder").innerHTML = e.video_iframe; var o = function () { window.YT && window.YT.loaded && e._yt_video_ready(), e.showing_video = !0, e._get_notification_display_el().style.visibility = "hidden" }; e.flip_animate ? (e._add_class("flipper", "flipped"), setTimeout(o, Xe.ANIM_TIME)) : e._animate_els(t, Xe.ANIM_TIME, o) })), Xe.prototype._track_event = function (e, t, i) { this.campaign_id ? (t = t || {}, t = A.extend(t, { campaign_id: this.campaign_id, message_id: this.message_id, message_type: "web_inapp", message_subtype: this.notif_type }), this.mixpanel.track(e, t, i)) : i && i.call() }, Xe.prototype._yt_video_ready = A.safewrap((function () { var e = this; if (!e.video_inited) { e.video_inited = !0; var t = e._get_el("video-elapsed"), i = e._get_el("video-time"), r = e._get_el("video-progress"); new window.YT.Player(Xe.MARKUP_PREFIX + "-video-frame", { events: { onReady: function (o) { var n = o.target, s = n.getDuration(), a = function (e) { return ("00" + e).slice(-2) }, c = function (e) { var t = Math.round(s - e), r = Math.floor(t / 60), o = Math.floor(r / 60); t -= 60 * r, r -= 60 * o, i.innerHTML = "-" + (o ? o + ":" : "") + a(r) + ":" + a(t) }; c(0), e._video_progress_checker = window.setInterval((function () { var e = n.getCurrentTime(); t.style.width = e / s * 100 + "%", c(e) }), 250), A.register_event(r, "click", (function (e) { var t = Math.max(0, e.pageX - r.getBoundingClientRect().left); n.seekTo(s * t / r.clientWidth, !0) })) } } }) } })); var Ke, Ye, Qe = function () { }; A.extend(Qe.prototype, Pe), Qe.prototype._init = function (e) { this._mixpanel = e }, Qe.prototype.set = ge((function (e, t, i) { var r = this.set_action(e, t); return A.isObject(e) && (i = t), this._get_config("save_referrer") && this._mixpanel.persistence.update_referrer_info(document.referrer), r.$set = A.extend({}, A.info.people_properties(), this._mixpanel.persistence.get_referrer_info(), r.$set), this._send_request(r, i) })), Qe.prototype.set_once = ge((function (e, t, i) { var r = this.set_once_action(e, t); return A.isObject(e) && (i = t), this._send_request(r, i) })), Qe.prototype.unset = ge((function (e, t) { var i = this.unset_action(e); return this._send_request(i, t) })), Qe.prototype.increment = ge((function (e, t, i) { var r = {}, o = {}; return A.isObject(e) ? (A.each(e, (function (e, t) { if (!this._is_reserved_property(t)) { if (isNaN(parseFloat(e))) return void q.error("Invalid increment value passed to mixpanel.people.increment - must be a number"); o[t] = e } }), this), i = t) : (A.isUndefined(t) && (t = 1), o[e] = t), r.$add = o, this._send_request(r, i) })), Qe.prototype.append = ge((function (e, t, i) { A.isObject(e) && (i = t); var r = this.append_action(e, t); return this._send_request(r, i) })), Qe.prototype.remove = ge((function (e, t, i) { A.isObject(e) && (i = t); var r = this.remove_action(e, t); return this._send_request(r, i) })), Qe.prototype.union = ge((function (e, t, i) { A.isObject(e) && (i = t); var r = this.union_action(e, t); return this._send_request(r, i) })), Qe.prototype.track_charge = ge((function (e, t, i) { if (A.isNumber(e) || (e = parseFloat(e), !isNaN(e))) return this.append("$transactions", A.extend({ $amount: e }, t), i); q.error("Invalid value passed to mixpanel.people.track_charge - must be a number") })), Qe.prototype.clear_charges = function (e) { return this.set("$transactions", [], e) }, Qe.prototype.delete_user = function () { if (this._identify_called()) { var e = { $delete: this._mixpanel.get_distinct_id() }; return this._send_request(e) } q.error("mixpanel.people.delete_user() requires you to call identify() first") }, Qe.prototype.toString = function () { return this._mixpanel.toString() + ".people" }, Qe.prototype._send_request = function (e, t) { e.$token = this._get_config("token"), e.$distinct_id = this._mixpanel.get_distinct_id(); var i = this._mixpanel.get_property("$device_id"), r = this._mixpanel.get_property("$user_id"), o = this._mixpanel.get_property("$had_persisted_distinct_id"); i && (e.$device_id = i), r && (e.$user_id = r), o && (e.$had_persisted_distinct_id = o); var n = A.encodeDates(e), s = A.truncate(n, 255); return this._identify_called() ? this._mixpanel._track_or_batch({ truncated_data: s, endpoint: this._get_config("api_host") + "/engage/", batcher: this._mixpanel.request_batchers.people }, t) : (this._enqueue(e), A.isUndefined(t) || (this._get_config("verbose") ? t({ status: -1, error: null }) : t(-1)), s) }, Qe.prototype._get_config = function (e) { return this._mixpanel.get_config(e) }, Qe.prototype._identify_called = function () { return !0 === this._mixpanel._flags.identify_called }, Qe.prototype._enqueue = function (e) { "$set" in e ? this._mixpanel.persistence._add_to_people_queue("$set", e) : "$set_once" in e ? this._mixpanel.persistence._add_to_people_queue("$set_once", e) : "$unset" in e ? this._mixpanel.persistence._add_to_people_queue("$unset", e) : "$add" in e ? this._mixpanel.persistence._add_to_people_queue("$add", e) : "$append" in e ? this._mixpanel.persistence._add_to_people_queue("$append", e) : "$remove" in e ? this._mixpanel.persistence._add_to_people_queue("$remove", e) : "$union" in e ? this._mixpanel.persistence._add_to_people_queue("$union", e) : q.error("Invalid call to _enqueue():", e) }, Qe.prototype._flush_one_queue = function (e, t, i, r) { var o = this, n = A.extend({}, this._mixpanel.persistence._get_queue(e)), s = n; A.isUndefined(n) || !A.isObject(n) || A.isEmptyObject(n) || (o._mixpanel.persistence._pop_from_people_queue(e, n), r && (s = r(n)), t.call(o, s, (function (t, r) { 0 === t && o._mixpanel.persistence._add_to_people_queue(e, n), A.isUndefined(i) || i(t, r) }))) }, Qe.prototype._flush = function (e, t, i, r, o, n, s) { var a = this, c = this._mixpanel.persistence._get_queue("$append"), p = this._mixpanel.persistence._get_queue("$remove"); if (this._flush_one_queue("$set", this.set, e), this._flush_one_queue("$set_once", this.set_once, r), this._flush_one_queue("$unset", this.unset, n, (function (e) { return A.keys(e) })), this._flush_one_queue("$add", this.increment, t), this._flush_one_queue("$union", this.union, o), !A.isUndefined(c) && A.isArray(c) && c.length) { for (var u, _ = function (e, t) { 0 === e && a._mixpanel.persistence._add_to_people_queue("$append", u), A.isUndefined(i) || i(e, t) }, l = c.length - 1; l >= 0; l--)u = c.pop(), A.isEmptyObject(u) || a.append(u, _); a._mixpanel.persistence.save() } if (!A.isUndefined(p) && A.isArray(p) && p.length) { for (var d, h = function (e, t) { 0 === e && a._mixpanel.persistence._add_to_people_queue("$remove", d), A.isUndefined(s) || s(e, t) }, f = p.length - 1; f >= 0; f--)d = p.pop(), A.isEmptyObject(d) || a.remove(d, h); a._mixpanel.persistence.save() } }, Qe.prototype._is_reserved_property = function (e) { return "$distinct_id" === e || "$token" === e || "$device_id" === e || "$user_id" === e || "$had_persisted_distinct_id" === e }, Qe.prototype.set = Qe.prototype.set, Qe.prototype.set_once = Qe.prototype.set_once, Qe.prototype.unset = Qe.prototype.unset, Qe.prototype.increment = Qe.prototype.increment, Qe.prototype.append = Qe.prototype.append, Qe.prototype.remove = Qe.prototype.remove, Qe.prototype.union = Qe.prototype.union, Qe.prototype.track_charge = Qe.prototype.track_charge, Qe.prototype.clear_charges = Qe.prototype.clear_charges, Qe.prototype.delete_user = Qe.prototype.delete_user, Qe.prototype.toString = Qe.prototype.toString; var Ze = r.XMLHttpRequest && "withCredentials" in new XMLHttpRequest, et = !Ze && -1 === E.indexOf("MSIE") && -1 === E.indexOf("Mozilla"), tt = null; S.sendBeacon && (tt = function () { return S.sendBeacon.apply(S, arguments) }); var it = { api_host: "https://api-js.mixpanel.com", api_method: "POST", api_transport: "XHR", app_host: "https://mixpanel.com", autotrack: !0, cdn: "https://cdn.mxpnl.com", cross_site_cookie: !1, cross_subdomain_cookie: !0, persistence: "cookie", persistence_name: "", cookie_domain: "", cookie_name: "", loaded: function () { }, store_google: !0, save_referrer: !0, test: !1, verbose: !1, img: !1, debug: !1, track_links_timeout: 300, cookie_expiration: 365, upgrade: !1, disable_persistence: !1, disable_cookie: !1, secure_cookie: !1, ip: !0, opt_out_tracking_by_default: !1, opt_out_persistence_by_default: !1, opt_out_tracking_persistence_type: "localStorage", opt_out_tracking_cookie_prefix: null, property_blacklist: [], xhr_headers: {}, inapp_protocol: "//", inapp_link_new_window: !1, ignore_dnt: !1, batch_requests: !1, batch_size: 50, batch_flush_interval_ms: 5e3, batch_request_timeout_ms: 9e4 }, rt = !1, ot = function () { }, nt = function (e, t, i) { var r, n = "mixpanel" === i ? Ye : Ye[i]; if (n && 0 === Ke) r = n; else { if (n && !A.isArray(n)) return void q.error("You have already initialized " + i); r = new ot } if (r._cached_groups = {}, r._user_decide_check_complete = !1, r._events_tracked_before_user_decide_check_complete = [], r._init(e, t, i), r.people = new Qe, r.people._init(r), o.DEBUG = o.DEBUG || r.get_config("debug"), r.__autotrack_enabled = r.get_config("autotrack"), r.get_config("autotrack")) { te.enabledForProject(r.get_config("token"), 100, 100) ? te.isBrowserSupported() ? te.init(r) : (r.__autotrack_enabled = !1, q.log("Disabling Automatic Event Collection because this browser is not supported")) : (r.__autotrack_enabled = !1, q.log("Not in active bucket: disabling Automatic Event Collection.")) } return !A.isUndefined(n) && A.isArray(n) && (r._execute_array.call(r.people, n.people), r._execute_array(n)), r }, st = function (e) { var t = A.JSONEncode(e); return { data: A.base64Encode(t) } }; ot.prototype.init = function (e, t, i) { if (A.isUndefined(i)) q.error("You must name your new library: init(token, config, name)"); else { if ("mixpanel" !== i) { var r = nt(e, t, i); return Ye[i] = r, r._loaded(), r } q.error("You must initialize the main mixpanel object right after you include the Mixpanel js snippet") } }, ot.prototype._init = function (e, t, i) { t = t || {}, this.__loaded = !0, this.config = {}, this._triggered_notifs = []; var o = {}, n = t.api_host, s = !!n && !n.match(/\.mixpanel\.com$/); "batch_requests" in t || s || !V(e, "batch", 30) || (o.batch_requests = !0), this.set_config(A.extend({}, it, o, t, { name: i, token: e, callback_fn: ("mixpanel" === i ? i : "mixpanel." + i) + "._jsc" })), this._jsc = function () { }, this.__dom_loaded_queue = [], this.__request_queue = [], this.__disabled_events = [], this._flags = { disable_all_events: !1, identify_called: !1 }, this.request_batchers = {}, this._batch_requests = this.get_config("batch_requests"), this._batch_requests && (A.localStorage.is_supported(!0) && Ze ? (this.start_batch_requests(), tt && r.addEventListener && r.addEventListener("unload", A.bind((function () { this.request_batchers.events.flush({ sendBeacon: !0 }) }), this))) : (this._batch_requests = !1, q.log("Turning off Mixpanel request-queueing; needs XHR and localStorage support"))), this.persistence = this.cookie = new Ee(this.config), this._gdpr_init(); var a = A.UUID(); this.get_distinct_id() || this.register_once({ distinct_id: a, $device_id: a }, "") }, ot.prototype._loaded = function () { this.get_config("loaded")(this), this._set_default_superprops() }, ot.prototype._set_default_superprops = function () { this.persistence.update_search_keyword(P.referrer), this.get_config("store_google") && this.persistence.update_campaign_params(), this.get_config("save_referrer") && this.persistence.update_referrer_info(P.referrer) }, ot.prototype._dom_loaded = function () { A.each(this.__dom_loaded_queue, (function (e) { this._track_dom.apply(this, e) }), this), this.has_opted_out_tracking() || A.each(this.__request_queue, (function (e) { this._send_request.apply(this, e) }), this), delete this.__dom_loaded_queue, delete this.__request_queue }, ot.prototype._track_dom = function (e, t) { if (this.get_config("img")) return q.error("You can't use DOM tracking functions with img = true."), !1; if (!rt) return this.__dom_loaded_queue.push([e, t]), !1; var i = (new e).init(this); return i.track.apply(i, t) }, ot.prototype._prepare_callback = function (e, t) { if (A.isUndefined(e)) return null; if (Ze) { return function (i) { e(i, t) } } var i = this._jsc, r = "" + Math.floor(1e8 * Math.random()), o = this.get_config("callback_fn") + "[" + r + "]"; return i[r] = function (o) { delete i[r], e(o, t) }, o }, ot.prototype._send_request = function (e, t, i, r) { var o = !0; if (et) return this.__request_queue.push(arguments), o; var n = { method: this.get_config("api_method"), transport: this.get_config("api_transport"), verbose: this.get_config("verbose") }, s = null; r || !A.isFunction(i) && "string" != typeof i || (r = i, i = null), i = A.extend(n, i || {}), Ze || (i.method = "GET"); var a = "POST" === i.method, c = tt && a && "sendbeacon" === i.transport.toLowerCase(), p = i.verbose; if (t.verbose && (p = !0), this.get_config("test") && (t.test = 1), p && (t.verbose = 1), this.get_config("img") && (t.img = 1), Ze || (r ? t.callback = r : (p || this.get_config("test")) && (t.callback = "(function(){})")), t.ip = this.get_config("ip") ? 1 : 0, t._ = (new Date).getTime().toString(), a && (s = "data=" + encodeURIComponent(t.data), delete t.data), e += "?" + A.HTTPBuildQuery(t), "img" in t) { var u = P.createElement("img"); u.src = e, P.body.appendChild(u) } else if (c) try { o = tt(e, s) } catch (e) { q.error(e), o = !1 } else if (Ze) try { var _ = new XMLHttpRequest; _.open(i.method, e, !0); var l = this.get_config("xhr_headers"); if (a && (l["Content-Type"] = "application/x-www-form-urlencoded"), A.each(l, (function (e, t) { _.setRequestHeader(t, e) })), i.timeout_ms && void 0 !== _.timeout) { _.timeout = i.timeout_ms; var d = (new Date).getTime() } _.withCredentials = !0, _.onreadystatechange = function () { var e; if (4 === _.readyState) if (200 === _.status) { if (r) if (p) { var t; try { t = A.JSONDecode(_.responseText) } catch (e) { if (q.error(e), !i.ignore_json_errors) return; t = _.responseText } r(t) } else r(Number(_.responseText)) } else e = _.timeout && !_.status && (new Date).getTime() - d >= _.timeout ? "timeout" : "Bad HTTP status: " + _.status + " " + _.statusText, q.error(e), r && r(p ? { status: 0, error: e, xhr_req: _ } : 0) }, _.send(s) } catch (e) { q.error(e), o = !1 } else { var h = P.createElement("script"); h.type = "text/javascript", h.async = !0, h.defer = !0, h.src = e; var f = P.getElementsByTagName("script")[0]; f.parentNode.insertBefore(h, f) } return o }, ot.prototype._execute_array = function (e) { var t, i = [], r = [], o = []; A.each(e, (function (e) { e && (t = e[0], A.isArray(t) ? o.push(e) : "function" == typeof e ? e.call(this) : A.isArray(e) && "alias" === t ? i.push(e) : A.isArray(e) && -1 !== t.indexOf("track") && "function" == typeof this[t] ? o.push(e) : r.push(e)) }), this); var n = function (e, t) { A.each(e, (function (e) { if (A.isArray(e[0])) { var i = t; A.each(e, (function (e) { i = i[e[0]].apply(i, e.slice(1)) })) } else this[e[0]].apply(this, e.slice(1)) }), t) }; n(i, this), n(r, this), n(o, this) }, ot.prototype.start_batch_requests = function () { var e = this.get_config("token"); if (!this.request_batchers.events) { var t = { libConfig: this.config, sendRequestFunc: A.bind((function (e, t, i, r) { this._send_request(this.get_config("api_host") + e, st(t), i, this._prepare_callback(r, t)) }), this) }; this.request_batchers = { events: new _e("__mpq_" + e + "_ev", "/track/", t), people: new _e("__mpq_" + e + "_pp", "/engage/", t), groups: new _e("__mpq_" + e + "_gr", "/groups/", t) } } A.each(this.request_batchers, (function (e) { e.start() })) }, ot.prototype.stop_batch_requests = function () { this._batch_requests = !1, A.each(this.request_batchers, (function (e) { e.stop(), e.clear() })) }, ot.prototype.push = function (e) { this._execute_array([e]) }, ot.prototype.disable = function (e) { void 0 === e ? this._flags.disable_all_events = !0 : this.__disabled_events = this.__disabled_events.concat(e) }, ot.prototype._track_or_batch = function (e, t) { var i = e.truncated_data, r = e.endpoint, o = e.batcher, n = e.should_send_immediately, s = e.send_request_options || {}; t = t || function () { }; var a = !0, c = A.bind((function () { return q.log("MIXPANEL REQUEST:"), q.log(i), this._send_request(r, st(i), s, this._prepare_callback(t, i)) }), this); return this._batch_requests && !n ? o.enqueue(i, (function (e) { e ? t(1, i) : c() })) : a = c(), a && i }, ot.prototype.track = me((function (e, t, i, r) { r || "function" != typeof i || (r = i, i = null); var o = (i = i || {}).transport; o && (i.transport = o); var n = i.send_immediately; if ("function" != typeof r && (r = function () { }), A.isUndefined(e)) q.error("No event name provided to mixpanel.track"); else { if (!this._event_is_disabled(e)) { (t = t || {}).token = this.get_config("token"); var s = this.persistence.remove_event_timer(e); if (!A.isUndefined(s)) { var a = (new Date).getTime() - s; t.$duration = parseFloat((a / 1e3).toFixed(3)) } this._set_default_superprops(), t = A.extend({}, A.info.properties(), this.persistence.properties(), t); var c = this.get_config("property_blacklist"); A.isArray(c) ? A.each(c, (function (e) { delete t[e] })) : q.error("Invalid value for property_blacklist config: " + c); var p = { event: e, properties: t }, u = this._track_or_batch({ truncated_data: A.truncate(p, 255), endpoint: this.get_config("api_host") + "/track/", batcher: this.request_batchers.events, should_send_immediately: n, send_request_options: i }, r); return this._check_and_handle_triggered_notifications(p), u } r(0) } })), ot.prototype.set_group = me((function (e, t, i) { A.isArray(t) || (t = [t]); var r = {}; return r[e] = t, this.register(r), this.people.set(e, t, i) })), ot.prototype.add_group = me((function (e, t, i) { var r = this.get_property(e); if (void 0 === r) { var o = {}; o[e] = [t], this.register(o) } else -1 === r.indexOf(t) && (r.push(t), this.register(o)); return this.people.union(e, t, i) })), ot.prototype.remove_group = me((function (e, t, i) { var r = this.get_property(e); if (void 0 !== r) { var o = r.indexOf(t); o > -1 && (r.splice(o, 1), this.register({ group_key: r })), 0 === r.length && this.unregister(e) } return this.people.remove(e, t, i) })), ot.prototype.track_with_groups = me((function (e, t, i, r) { var o = A.extend({}, t || {}); return A.each(i, (function (e, t) { null != e && (o[t] = e) })), this.track(e, o, r) })), ot.prototype._create_map_key = function (e, t) { return e + "_" + JSON.stringify(t) }, ot.prototype._remove_group_from_cache = function (e, t) { delete this._cached_groups[this._create_map_key(e, t)] }, ot.prototype.get_group = function (e, t) { var i = this._create_map_key(e, t), r = this._cached_groups[i]; return void 0 !== r && r._group_key === e && r._group_id === t || ((r = new Oe)._init(this, e, t), this._cached_groups[i] = r), r }, ot.prototype.track_pageview = function (e) { A.isUndefined(e) && (e = P.location.href), this.track("mp_page_view", A.info.pageviewInfo(e)) }, ot.prototype.track_links = function () { return this._track_dom.call(this, re, arguments) }, ot.prototype.track_forms = function () { return this._track_dom.call(this, oe, arguments) }, ot.prototype.time_event = function (e) { A.isUndefined(e) ? q.error("No event name provided to mixpanel.time_event") : this._event_is_disabled(e) || this.persistence.set_event_timer(e, (new Date).getTime()) }, ot.prototype.register = function (e, t) { this.persistence.register(e, t) }, ot.prototype.register_once = function (e, t, i) { this.persistence.register_once(e, t, i) }, ot.prototype.unregister = function (e) { this.persistence.unregister(e) }, ot.prototype._register_single = function (e, t) { var i = {}; i[e] = t, this.register(i) }, ot.prototype.identify = function (e, t, i, r, o, n, s, a) { var c = this.get_distinct_id(); if (this.register({ $user_id: e }), !this.get_property("$device_id")) { var p = c; this.register_once({ $had_persisted_distinct_id: !0, $device_id: p }, "") } e !== c && e !== this.get_property("__alias") && (this.unregister("__alias"), this.register({ distinct_id: e })), this._check_and_handle_notifications(this.get_distinct_id()), this._flags.identify_called = !0, this.people._flush(t, i, r, o, n, s, a), e !== c && this.track("$identify", { distinct_id: e, $anon_distinct_id: c }) }, ot.prototype.reset = function () { this.persistence.clear(), this._flags.identify_called = !1; var e = A.UUID(); this.register_once({ distinct_id: e, $device_id: e }, "") }, ot.prototype.get_distinct_id = function () { return this.get_property("distinct_id") }, ot.prototype.alias = function (e, t) { if (e === this.get_property("$people_distinct_id")) return q.critical("Attempting to create alias for existing People user - aborting."), -2; var i = this; return A.isUndefined(t) && (t = this.get_distinct_id()), e !== t ? (this._register_single("__alias", e), this.track("$create_alias", { alias: e, distinct_id: t }, (function () { i.identify(e) }))) : (q.error("alias matches current distinct_id - skipping api call."), this.identify(e), -1) }, ot.prototype.name_tag = function (e) { this._register_single("mp_name_tag", e) }, ot.prototype.set_config = function (e) { A.isObject(e) && (A.extend(this.config, e), e.batch_size && A.each(this.request_batchers, (function (e) { e.resetBatchSize() })), this.get_config("persistence_name") || (this.config.persistence_name = this.config.cookie_name), this.get_config("disable_persistence") || (this.config.disable_persistence = this.config.disable_cookie), this.persistence && this.persistence.update_config(this.config), o.DEBUG = o.DEBUG || this.get_config("debug")) }, ot.prototype.get_config = function (e) { return this.config[e] }, ot.prototype.get_property = function (e) { return this.persistence.props[e] }, ot.prototype.toString = function () { var e = this.get_config("name"); return "mixpanel" !== e && (e = "mixpanel." + e), e }, ot.prototype._event_is_disabled = function (e) { return A.isBlockedUA(E) || this._flags.disable_all_events || A.include(this.__disabled_events, e) }, ot.prototype._check_and_handle_triggered_notifications = me((function (e) { if (this._user_decide_check_complete) for (var t = this._triggered_notifs, i = 0; i < t.length; i++) { if (new Xe(t[i], this)._matches_event_data(e)) return void this._show_notification(t[i]) } else this._events_tracked_before_user_decide_check_complete.push(e) })), ot.prototype._check_and_handle_notifications = me((function (e) { if (e && !this._flags.identify_called && !this.get_config("disable_notifications")) { q.log("MIXPANEL NOTIFICATION CHECK"); var t = { verbose: !0, version: "3", lib: "web", token: this.get_config("token"), distinct_id: e }; this._send_request(this.get_config("api_host") + "/decide/", t, { method: "GET", transport: "XHR" }, this._prepare_callback(A.bind((function (e) { if (e.notifications && e.notifications.length > 0) { this._triggered_notifs = []; var t = []; A.each(e.notifications, (function (e) { (e.display_triggers && e.display_triggers.length > 0 ? this._triggered_notifs : t).push(e) }), this), t.length > 0 && this._show_notification.call(this, t[0]) } this._handle_user_decide_check_complete() }), this))) } })), ot.prototype._handle_user_decide_check_complete = function () { this._user_decide_check_complete = !0; for (var e = this._events_tracked_before_user_decide_check_complete; e.length > 0;) { var t = e.shift(); this._check_and_handle_triggered_notifications(t) } }, ot.prototype._show_notification = function (e) { new Xe(e, this).show() }, ot.prototype._gdpr_init = function () { "localStorage" === this.get_config("opt_out_tracking_persistence_type") && A.localStorage.is_supported() && (!this.has_opted_in_tracking() && this.has_opted_in_tracking({ persistence_type: "cookie" }) && this.opt_in_tracking({ enable_persistence: !1 }), !this.has_opted_out_tracking() && this.has_opted_out_tracking({ persistence_type: "cookie" }) && this.opt_out_tracking({ clear_persistence: !1 }), this.clear_opt_in_out_tracking({ persistence_type: "cookie", enable_persistence: !1 })), this.has_opted_out_tracking() ? this._gdpr_update_persistence({ clear_persistence: !0 }) : this.has_opted_in_tracking() || !this.get_config("opt_out_tracking_by_default") && !A.cookie.get("mp_optout") || (A.cookie.remove("mp_optout"), this.opt_out_tracking({ clear_persistence: this.get_config("opt_out_persistence_by_default") })) }, ot.prototype._gdpr_update_persistence = function (e) { var t; if (e && e.clear_persistence) t = !0; else { if (!e || !e.enable_persistence) return; t = !1 } this.get_config("disable_persistence") || this.persistence.disabled === t || this.persistence.set_disabled(t), t && A.each(this.request_batchers, (function (e) { e.clear() })) }, ot.prototype._gdpr_call_func = function (e, t) { return t = A.extend({ track: A.bind(this.track, this), persistence_type: this.get_config("opt_out_tracking_persistence_type"), cookie_prefix: this.get_config("opt_out_tracking_cookie_prefix"), cookie_expiration: this.get_config("cookie_expiration"), cross_site_cookie: this.get_config("cross_site_cookie"), cross_subdomain_cookie: this.get_config("cross_subdomain_cookie"), cookie_domain: this.get_config("cookie_domain"), secure_cookie: this.get_config("secure_cookie"), ignore_dnt: this.get_config("ignore_dnt") }, t), A.localStorage.is_supported() || (t.persistence_type = "cookie"), e(this.get_config("token"), { track: t.track, trackEventName: t.track_event_name, trackProperties: t.track_properties, persistenceType: t.persistence_type, persistencePrefix: t.cookie_prefix, cookieDomain: t.cookie_domain, cookieExpiration: t.cookie_expiration, crossSiteCookie: t.cross_site_cookie, crossSubdomainCookie: t.cross_subdomain_cookie, secureCookie: t.secure_cookie, ignoreDnt: t.ignore_dnt }) }, ot.prototype.opt_in_tracking = function (e) { e = A.extend({ enable_persistence: !0 }, e), this._gdpr_call_func(le, e), this._gdpr_update_persistence(e) }, ot.prototype.opt_out_tracking = function (e) { (e = A.extend({ clear_persistence: !0, delete_user: !0 }, e)).delete_user && this.people && this.people._identify_called() && (this.people.delete_user(), this.people.clear_charges()), this._gdpr_call_func(de, e), this._gdpr_update_persistence(e) }, ot.prototype.has_opted_in_tracking = function (e) { return this._gdpr_call_func(he, e) }, ot.prototype.has_opted_out_tracking = function (e) { return this._gdpr_call_func(fe, e) }, ot.prototype.clear_opt_in_out_tracking = function (e) { e = A.extend({ enable_persistence: !0 }, e), this._gdpr_call_func(ye, e), this._gdpr_update_persistence(e) }, ot.prototype.init = ot.prototype.init, ot.prototype.reset = ot.prototype.reset, ot.prototype.disable = ot.prototype.disable, ot.prototype.time_event = ot.prototype.time_event, ot.prototype.track = ot.prototype.track, ot.prototype.track_links = ot.prototype.track_links, ot.prototype.track_forms = ot.prototype.track_forms, ot.prototype.track_pageview = ot.prototype.track_pageview, ot.prototype.register = ot.prototype.register, ot.prototype.register_once = ot.prototype.register_once, ot.prototype.unregister = ot.prototype.unregister, ot.prototype.identify = ot.prototype.identify, ot.prototype.alias = ot.prototype.alias, ot.prototype.name_tag = ot.prototype.name_tag, ot.prototype.set_config = ot.prototype.set_config, ot.prototype.get_config = ot.prototype.get_config, ot.prototype.get_property = ot.prototype.get_property, ot.prototype.get_distinct_id = ot.prototype.get_distinct_id, ot.prototype.toString = ot.prototype.toString, ot.prototype._check_and_handle_notifications = ot.prototype._check_and_handle_notifications, ot.prototype._handle_user_decide_check_complete = ot.prototype._handle_user_decide_check_complete, ot.prototype._show_notification = ot.prototype._show_notification, ot.prototype.opt_out_tracking = ot.prototype.opt_out_tracking, ot.prototype.opt_in_tracking = ot.prototype.opt_in_tracking, ot.prototype.has_opted_out_tracking = ot.prototype.has_opted_out_tracking, ot.prototype.has_opted_in_tracking = ot.prototype.has_opted_in_tracking, ot.prototype.clear_opt_in_out_tracking = ot.prototype.clear_opt_in_out_tracking, ot.prototype.get_group = ot.prototype.get_group, ot.prototype.set_group = ot.prototype.set_group, ot.prototype.add_group = ot.prototype.add_group, ot.prototype.remove_group = ot.prototype.remove_group, ot.prototype.track_with_groups = ot.prototype.track_with_groups, ot.prototype.stop_batch_requests = ot.prototype.stop_batch_requests, Ee.prototype.properties = Ee.prototype.properties, Ee.prototype.update_search_keyword = Ee.prototype.update_search_keyword, Ee.prototype.update_referrer_info = Ee.prototype.update_referrer_info, Ee.prototype.get_cross_subdomain = Ee.prototype.get_cross_subdomain, Ee.prototype.clear = Ee.prototype.clear, A.safewrap_class(ot, ["identify", "_check_and_handle_notifications", "_show_notification"]); var at = {}, ct = function () { Ye.init = function (e, t, i) { if (i) return Ye[i] || (Ye[i] = at[i] = nt(e, t, i), Ye[i]._loaded()), Ye[i]; var o = Ye; at.mixpanel ? o = at.mixpanel : e && ((o = nt(e, t, "mixpanel"))._loaded(), at.mixpanel = o), Ye = o, 1 === Ke && (r.mixpanel = Ye), A.each(at, (function (e, t) { "mixpanel" !== t && (Ye[t] = e) })), Ye._ = A } }; var pt = (Ke = 0, Ye = new ot, ct(), Ye.init(), function () { function e() { e.done || (e.done = !0, rt = !0, et = !1, A.each(at, (function (e) { e._dom_loaded() }))) } if (P.addEventListener) "complete" === P.readyState ? e() : P.addEventListener("DOMContentLoaded", e, !1); else if (P.attachEvent) { P.attachEvent("onreadystatechange", e); var t = !1; try { t = null === r.frameElement } catch (e) { } P.documentElement.doScroll && t && function t() { try { P.documentElement.doScroll("left") } catch (e) { return void setTimeout(t, 1) } e() }() } A.register_event(r, "load", e, !0) }(), Ye); e.exports = pt }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); var r = i(28); Object.defineProperty(t, "Snowflake", { enumerable: !0, get: function () { return r.Snowflake } }) }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.Snowflake = void 0; var r = i(29), o = function () { function e() { this.isEnabled = !0, this.baseManagerService = r.BaseManagerService.getInstance() } return e.getInstance = function () { return e.instance || (e.instance = new e), e.instance }, e.prototype.init = function () { }, e.prototype.register = function (e, t) { this.superProperties = e }, e.prototype.peopleSet = function (e, t, i) { this.userProperties = e }, e.prototype.disable = function () { this.isEnabled = !1 }, e.prototype.enable = function () { this.isEnabled = !0 }, e.prototype.track = function (e) { e = Object.assign({}, e, this.superProperties, this.userProperties), this.isEnabled && this.baseManagerService.add(e) }, e }(); t.Snowflake = o }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); var r = i(30); Object.defineProperty(t, "BaseManagerService", { enumerable: !0, get: function () { return r.BaseManagerService } }) }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.BaseManagerService = void 0; var r = i(31), o = i(2), n = function () { function e() { this.actionsList = [], this.requestService = new r.RequestService } return e.getInstance = function () { return e.instance || (e.instance = new e), e.instance }, e.prototype.add = function (e) { this.send(e) }, e.prototype.send = function (e) { try { if (e) this.requestService.xhrPost(o.configVariables.attributionEventsHttpUrl, e).then((function (e) { })).catch((function (t) { var i = new Error(JSON.stringify({ error: t, action: e, isProduction: o.configVariables.isProduction })); "undefined" != typeof TrackJS && TrackJS.isInstalled() && TrackJS.track(i), "undefined" != typeof newrelic && newrelic.noticeError(i) })); else { var t = new Error(JSON.stringify({ error: "Empty action", isProduction: o.configVariables.isProduction })); "undefined" != typeof TrackJS && TrackJS.isInstalled() && TrackJS.track(t), "undefined" != typeof newrelic && newrelic.noticeError(t) } } catch (i) { t = new Error(JSON.stringify({ error: i, action: e, isProduction: o.configVariables.isProduction })); "undefined" != typeof TrackJS && TrackJS.isInstalled() && TrackJS.track(t), "undefined" != typeof newrelic && newrelic.noticeError(t) } }, e }(); t.BaseManagerService = n }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); var r = i(32); Object.defineProperty(t, "RequestService", { enumerable: !0, get: function () { return r.RequestService } }) }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.RequestService = void 0; var r = function () { function e() { } return e.prototype.post = function (e, t, i) { return void 0 === i && (i = "post"), fetch(e, { method: i, mode: "no-cors", body: JSON.stringify(t) }) }, e.prototype.xhrPost = function (e, t) { return new Promise((function (i, r) { var o = new XMLHttpRequest; o.onload = function () { o.status >= 200 && o.status < 300 ? i(o.responseText) : r({ status: o.status, statusText: o.statusText }) }, o.onerror = function (e) { r({ status: o.status, statusText: o.statusText, error: e.target.status, responseText: o.responseText }) }; var n = t; o.open("POST", e), o.setRequestHeader("Content-Type", "application/json"); var s = { object: JSON.stringify(n) }; o.send(JSON.stringify(s)) })) }, e.prototype.postIframe = function (e, t, i) { var r = this; return void 0 === i && (i = "post"), new Promise((function (o, n) { try { for (var s in r.iframe = r.initIframe(), r.form = r.initForm(e, i), t) if (t.hasOwnProperty(s)) { var a = r.initParam(s, t[s]); r.form.appendChild(a) } document.body.appendChild(r.iframe), document.body.appendChild(r.form), r.form.submit(), o(!0) } catch (e) { n(!1) } })) }, e.prototype.initIframe = function () { var e = document.createElement("iframe"); return e.name = "hiddenFrame", e.width = "0", e.height = "0", e.frameBorder = "0", e.style.display = "none", e }, e.prototype.initForm = function (e, t) { var i = document.createElement("form"); return i.width = "0", i.height = "0", i.frameBorder = "0", i.style.display = "none", i.target = this.iframe.name, i.method = t, i.action = e, i }, e.prototype.initParam = function (e, t) { var i = document.createElement("input"); return i.type = "hidden", i.name = e, i.value = t, i }, e.prototype.dispose = function () { try { return this.form && this.form.remove(), this.iframe && this.iframe.remove(), !0 } catch (e) { return !1 } }, e }(); t.RequestService = r }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); var r = i(34); Object.defineProperty(t, "Hotjar", { enumerable: !0, get: function () { return r.Hotjar } }) }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.Hotjar = void 0; var r = function () { function e() { } return e.getInstance = function () { return e.instance || (e.instance = new e), e.instance }, e.prototype.identify = function (e, t, i, r, o) { void 0 === t && (t = void 0), void 0 === i && (i = void 0), void 0 === r && (r = void 0), void 0 === o && (o = void 0), window.hj && window.hj("identify", e, { userId: e, subscriptionStatus: t, licenseType: i, signUpDate: r, lastDownloadDate: o }) }, e }(); t.Hotjar = r }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); var r = i(36); Object.defineProperty(t, "SuperProperties", { enumerable: !0, get: function () { return r.SuperProperties } }); var o = i(39); Object.defineProperty(t, "UserProperties", { enumerable: !0, get: function () { return o.UserProperties } }) }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.SuperProperties = void 0; var r = i(4), o = i(1), n = i(13), s = i(14), a = i(8), c = function (e) { var t = e.user_status, i = e.music_active_subscription, c = e.footage_active_subscription, p = e.domain, u = e.page, _ = e.timestamp, l = e.referrer, d = e.browser, h = e.language, f = e.os, m = e.user_agent, g = e.ip, v = e.sub_continent, y = e.filter, b = e.items_in_cart, k = e.page_url, w = (e.email, e.product), x = new r.CookieService; this.session_id = x.get() || "", this.visitor_id = x.get(o.CookieValuesEnum.VisitorId) || x.get("mixPanelUser") || "", this.user_status = t || "", this.music_active_subscription = i || "none", this.footage_active_subscription = c || "none", this.domain = p || location.origin, this.page = u || n.Helper.getPage() || "", this.product = w || n.Helper.getProduct() || "", this.timestamp = _ || (new Date).toString(), this.referrer = l || document.referrer || "none", this.browser = d || n.Helper.detectBrowser() || "", this.language = h || navigator.language, this.os = f || n.Helper.getOSName() || "", this.user_agent = m || navigator.userAgent, this.ip = g || "", this.sub_continent = v || "PROPERTY-VALUE", this.filter = y || "", this.items_in_cart = b || null, this.page_url = k || location.href, this.utm_campaign = s.UtmsManager.getInstance().utms[a.utm_campaign] || void 0, this.utm_content = s.UtmsManager.getInstance().utms[a.utm_content] || void 0, this.utm_medium = s.UtmsManager.getInstance().utms[a.utm_medium] || void 0, this.utm_source = s.UtmsManager.getInstance().utms[a.utm_source] || void 0, this.utm_term = s.UtmsManager.getInstance().utms[a.utm_term] || void 0 }; t.SuperProperties = c }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.browsers = void 0, t.browsers = { isChrome: !(!window.chrome || !window.chrome.webstore && !window.chrome.runtime), isOpera: !!window.opr && !!window.opr.addons || !!window.opera || navigator.userAgent.indexOf(" OPR/") >= 0, isFirefox: "undefined" != typeof InstallTrigger, isSafari: /constructor/i.test(window.HTMLElement) || "[object SafariRemoteNotification]" === (!window.safari || "undefined" != typeof safari && safari.pushNotification).toString(), isIE: !!document.documentMode, isEdge: window.navigator.userAgent.indexOf("Edge") > -1, isMobileDevice: void 0 !== window.orientation || -1 !== navigator.userAgent.indexOf("IEMobile") } }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.LocationService = void 0; var r = function () { function e() { } return e.prototype.getParameterByName = function (e, t) { t || (t = window.location.href), e = e.replace(/[\[\]]/g, "\\$&"); var i = new RegExp("[?&]" + e + "(=([^&#]*)|&|#|$)").exec(t); return i ? i[2] ? decodeURIComponent(i[2].replace(/\+/g, " ")) : "" : null }, e.prototype.getUtmParameterByName = function (e) { return this.getParameterByName(e) || "No referrer" }, e }(); t.LocationService = r }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.UserProperties = void 0; var r = i(4), o = function (e) { var t = e.user_id, i = e.created_at, o = e.user_status, n = e.music_active_subscription, s = e.artlist_user, a = e.email, c = new r.LocalStorageService; this.user_id = t || "New User", this.created_at = i || (new Date).toString(), this.user_status = o || "", this.music_active_subscription = n || "none", this.artlist_user = !(!s || "none" == s), this.email = a || c.get("userName") || "none" }; t.UserProperties = o }, function (e, t, i) { "use strict"; var r = this && this.__spreadArrays || function () { for (var e = 0, t = 0, i = arguments.length; t < i; t++)e += arguments[t].length; var r = Array(e), o = 0; for (t = 0; t < i; t++)for (var n = arguments[t], s = 0, a = n.length; s < a; s++, o++)r[o] = n[s]; return r }; Object.defineProperty(t, "__esModule", { value: !0 }), t.ObjectParamFunction = void 0, t.ObjectParamFunction = function (e, t, i) { var o = i.value; i.value = function () { for (var e, t = [], i = 0; i < arguments.length; i++)t[i] = arguments[i]; return 1 === t.length ? (Object.assign.apply(Object, r([this], t)), e = o.apply(this)) : e = o.apply(this, t), e } } }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); var r = i(42); Object.defineProperty(t, "LocalStorageService", { enumerable: !0, get: function () { return r.LocalStorageService } }), Object.defineProperty(t, "SessionStorageService", { enumerable: !0, get: function () { return r.SessionStorageService } }) }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.LocalStorageService = t.SessionStorageService = void 0; var r = i(43), o = function () { function e() { } return e.prototype.get = function (e) { return sessionStorage.getItem(e || r.StorageValues.MixPanelStartTime) }, e.prototype.set = function (e, t) { sessionStorage.setItem(e || r.StorageValues.MixPanelStartTime, t) }, e }(); t.SessionStorageService = o; var n = function () { function e() { } return e.prototype.get = function (e) { return localStorage.getItem(e || r.StorageValues.MixPanelStartTime) }, e.prototype.set = function (e, t) { localStorage.setItem(e || r.StorageValues.MixPanelStartTime, t) }, e }(); t.LocalStorageService = n }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.StorageValues = void 0, function (e) { e.MixPanelStartTime = "MixPanelStartTime" }(t.StorageValues || (t.StorageValues = {})) }, function (e, t, i) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.EnvironmentNames = t.ProjectNames = t.EventNames = t.Attribution = void 0; var r = i(7), o = i(6), n = i(16), s = i(0), a = i(3); t.Attribution = new r.ActionsService; var c = i(6); Object.defineProperty(t, "AttributionEvents", { enumerable: !0, get: function () { return c.PublicEventService } }), t.EventNames = n, t.ProjectNames = s.Project, t.EnvironmentNames = a.Environment, window.jQuery && (window.attribution = t.Attribution, window.attribution.eventNames = t.EventNames, window.attribution.projectNames = t.ProjectNames, window.attribution.environmentNames = t.EnvironmentNames, window.attributionEvents = new o.PublicEventService) }]);